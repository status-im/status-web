"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6822],{18962:(e,t,i)=>{i.d(t,{V:()=>r,c:()=>l});var a=i(27274),n=i(92834),s=i(38272);let p=(0,n.createContext)(null),r=e=>{let{children:t}=e,i=function(){let[e,t]=(0,n.useState)({type:"idle"}),i=(0,n.useCallback)(e=>{t(t=>(0,s.YW)([t,e]).with([{type:"idle"},{type:"START_SIWE"}],()=>({type:"siwe",step:"initialize"})).with([{type:"idle"},{type:"START_CREATE_VAULT"}],()=>({type:"createVault",step:"initialize"})).with([{type:"idle"},{type:"START_INCREASE_ALLOWANCE"}],e=>{let[,t]=e;return{type:"increaseAllowance",step:"initialize",amount:t.amount}}).with([{type:"idle"},{type:"START_STAKING"}],e=>{let[,t]=e;return{type:"staking",step:"initialize",amount:t.amount}}).with([{type:"idle"},{type:"START_COMPOUND"}],e=>{let[,t]=e;return{type:"compound",step:"initialize",amount:t.amount}}).with([{type:"siwe",step:"initialize"},{type:"SIGN"}],()=>({type:"siwe",step:"processing"})).with([{type:"siwe",step:"initialize"},{type:"REJECT"}],()=>({type:"siwe",step:"rejected"})).with([{type:"siwe",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"siwe",step:"processing"},{type:"REJECT"}],()=>({type:"siwe",step:"rejected"})).with([{type:"siwe",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"siwe",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"createVault",step:"initialize"},{type:"SIGN"}],()=>({type:"createVault",step:"processing"})).with([{type:"createVault",step:"initialize"},{type:"REJECT"}],()=>({type:"createVault",step:"rejected"})).with([{type:"createVault",step:"processing"},{type:"REJECT"}],()=>({type:"createVault",step:"rejected"})).with([{type:"createVault",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"createVault",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"increaseAllowance",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"increaseAllowance",step:"processing",amount:t.amount}}).with([{type:"increaseAllowance",step:"initialize"},{type:"REJECT"}],e=>{let[t]=e;return{type:"increaseAllowance",step:"rejected",amount:t.amount}}).with([{type:"increaseAllowance",step:"processing"},{type:"COMPLETE"}],e=>{let[t,i]=e;return{type:"staking",step:"initialize",amount:i.amount||t.amount||"0"}}).with([{type:"increaseAllowance",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"increaseAllowance",step:"rejected",amount:t.amount}}).with([{type:"increaseAllowance",step:"rejected"},{type:"START_INCREASE_ALLOWANCE"}],e=>{let[t,i]=e;return{type:"increaseAllowance",step:"initialize",amount:i.amount||t.amount}}).with([{type:"increaseAllowance",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"staking",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"staking",step:"processing",amount:t.amount}}).with([{type:"staking",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"staking",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"staking",step:"rejected",amount:t.amount}}).with([{type:"staking",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"staking",step:"rejected"},{type:"START_STAKING"}],e=>{let[t,i]=e;return{type:"staking",step:"initialize",amount:i.amount||t.amount}}).with([{type:"staking",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"idle"},{type:"START_UNSTAKING"}],e=>{let[,t]=e;return{type:"unstaking",step:"initialize",amount:t.amount}}).with([{type:"unstaking",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"unstaking",step:"processing",amount:t.amount}}).with([{type:"unstaking",step:"initialize"},{type:"REJECT"}],e=>{let[t]=e;return{type:"unstaking",step:"rejected",amount:t.amount}}).with([{type:"unstaking",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"unstaking",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"unstaking",step:"rejected",amount:t.amount}}).with([{type:"unstaking",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"unstaking",step:"rejected"},{type:"START_UNSTAKING"}],e=>{let[t,i]=e;return{type:"unstaking",step:"initialize",amount:i.amount||t.amount}}).with([{type:"unstaking",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"idle"},{type:"START_WITHDRAW"}],e=>{let[,t]=e;return{type:"withdraw",step:"processing",amount:t.amount}}).with([{type:"withdraw",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"withdraw",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"withdraw",step:"rejected",amount:t.amount}}).with([{type:"withdraw",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"idle"},{type:"START_LOCK"}],()=>({type:"lock",step:"initialize"})).with([{type:"lock",step:"initialize"},{type:"SIGN"}],()=>({type:"lock",step:"processing"})).with([{type:"lock",step:"initialize"},{type:"REJECT"}],()=>({type:"lock",step:"rejected"})).with([{type:"lock",step:"processing"},{type:"REJECT"}],()=>({type:"lock",step:"rejected"})).with([{type:"lock",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"lock",step:"rejected"},{type:"START_LOCK"}],()=>({type:"lock",step:"initialize"})).with([{type:"lock",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"compound",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"compound",step:"processing",amount:t.amount}}).with([{type:"compound",step:"initialize"},{type:"REJECT"}],e=>{let[t]=e;return{type:"compound",step:"rejected",amount:t.amount}}).with([{type:"compound",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"compound",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"compound",step:"rejected",amount:t.amount}}).with([{type:"compound",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"compound",step:"rejected"},{type:"START_COMPOUND"}],e=>{let[t,i]=e;return{type:"compound",step:"initialize",amount:i.amount||t.amount}}).with([{type:"compound",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"success"},{type:"RESET"}],()=>({type:"idle"})).otherwise(()=>t))},[]),a=(0,n.useCallback)(()=>{i({type:"RESET"})},[i]);return{state:e,send:i,reset:a}}();return(0,a.jsx)(p.Provider,{value:i,children:t})},l=()=>{let e=(0,n.useContext)(p);if(!e)throw Error("useVaultStateContext must be used within VaultStateProvider");return e}},34490:(e,t,i)=>{i.d(t,{C:()=>w});var a=i(87579),n=i(22553),s=i(46588),p=i(29279),r=i(86436),l=i(42712),c=i(88798);let o={MULTIPLIER_POINTS:"multiplier-points-balance"},u={vaultBalances:{},totalUncompounded:l._s,totalMpRedeemed:l._s};async function y(e,t){return await (0,r.J)(e,{address:l.Sj.address,abi:l.Sj.abi,functionName:"mpBalanceOf",args:[t]})}async function d(e,t,i){try{return await (0,r.J)(e,{chainId:t,address:l.Sj.address,abi:l.Sj.abi,functionName:"mpBalanceOfAccount",args:[i]})}catch(e){return console.error("Failed to fetch account MP redeemed for ".concat(i,":"),e instanceof Error?e.message:String(e)),l._s}}function w(){let{address:e}=(0,n.F)(),t=(0,s.U)(),i=(0,p.i)(),{data:r}=(0,c.E)();return(0,a.I)({queryKey:[o.MULTIPLIER_POINTS,e,null==r?void 0:r.length],queryFn:async()=>{if(!r||0===r.length||!e||!i)return u;try{let a=r.map(e=>e.address),n=await Promise.all(a.map(e=>y(t,e))),s=a.reduce((e,t,i)=>(e[t]=n[i],e),{}),p=await d(t,i,e),c=r.reduce((e,t)=>{var i,a,n;let p=null!=(a=s[t.address])?a:l._s,r=null!=(n=null==(i=t.data)?void 0:i.mpAccrued)?n:l._s;return e+(p>r?p-r:l._s)},l._s);return{vaultBalances:s,totalUncompounded:c,totalMpRedeemed:p}}catch(e){return console.error("Failed to fetch multiplier points balances:",e),u}},enabled:!!e&&!!r&&r.length>0,staleTime:l.WS.MP_STALE_TIME,refetchInterval:l.WS.MP_REFETCH_INTERVAL})}},51026:(e,t,i)=>{i.d(t,{e:()=>l});var a=i(92834),n=i(49535),s=i(22553),p=i(42712);function r(e,t){return Number((0,n.J)(e,t))}function l(e){let{isConnected:t}=(0,s.F)();return(0,a.useMemo)(()=>t?e&&0!==e.length?function(e,t){let i=0,a=0;for(let n of e){if(!n.data||0n===n.data.stakedBalance)continue;let e=r(n.data.stakedBalance,t);i+=function(e,t,i){let a=r(e,i),n=r(t,i);return 0===a?p.kV:n/a+p.kV}(n.data.stakedBalance,n.data.mpAccrued,t)*e,a+=e}if(0===a)return{value:p.kV,formatted:p.kV.toFixed(p.fI),totalStaked:0,hasStake:!1};let n=i/a;return{value:n,formatted:"x".concat(n.toFixed(p.b7)),totalStaked:a,hasStake:!0}}(e,p.YR.decimals):{value:p.kV,formatted:"x".concat(p.kV.toFixed(p.fI)),totalStaked:0,hasStake:!1}:{value:Number(0),formatted:Number(0).toFixed(p.b7).toString(),totalStaked:0,hasStake:!1},[e,t])}},88798:(e,t,i)=>{i.d(t,{E:()=>m});var a=i(52539),n=i(87579),s=i(53692),p=i(22553),r=i(46588),l=i(29279),c=i(86436),o=i(54987),u=i(2081),y=i(42712);async function d(e,t,i){return await (0,c.J)(e,{chainId:t,address:y.Sj.address,abi:y.Sj.abi,functionName:"getAccountVaults",args:[i]})}async function w(e,t,i){try{let[a,n,s]=await (0,o.I)(e,{contracts:[{chainId:t,address:y.Sj.address,abi:y.Sj.abi,functionName:"getVault",args:[i]},{chainId:t,address:i,abi:u.re,functionName:"lockUntil",args:[]},{chainId:t,address:y.YR.address,abi:y.YR.abi,functionName:"balanceOf",args:[i]}]});("success"!==a.status||"success"!==n.status||"success"!==s.status)&&console.error("Failed to fetch vault data for ".concat(i,":"),"success"!==a.status?a.error:"success"!==n.status?n.error:s.error);let p=a.result,r=n.result,l=s.result;return{...p,lockUntil:r,depositedBalance:l}}catch(e){return console.error("Failed to fetch vault data for ".concat(i,":"),e instanceof Error?e.message:String(e)),null}}async function E(e,t,i){let a=await w(e,t,i);return{address:i,data:a}}function m(e){var t,i;let{address:c}=(0,p.F)(),o=(0,r.U)(),u=(0,l.i)(),w=(0,a.useToast)(),m=(0,s.c)();return(0,n.I)({queryKey:["staking-vaults",c,u],queryFn:async()=>{if(!c)return[];try{let e=await d(o,u,c);return await Promise.all(e.map(e=>E(o,u,e)))}catch(e){throw w.negative(m("errors.failed_fetch_vaults",{error:e instanceof Error?e.message:"Unknown error"})),e}},enabled:null!=(t=null==e?void 0:e.enabled)?t:!!c,staleTime:null!=(i=null==e?void 0:e.staleTime)?i:y.WS.DEFAULT_STALE_TIME,refetchInterval:null==e?void 0:e.refetchInterval})}}}]);