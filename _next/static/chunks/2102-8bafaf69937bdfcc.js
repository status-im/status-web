"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2102],{466:(e,t,a)=>{a.d(t,{N:()=>X});var s=a(27274),n=a(92834),r=a(58449),i=a(52539),l=a(53540),o=a(51960),d=a(26260),c=a(30703),u=a(53692),p=a(3896),h=a(38272),m=a(10278),x=a(49535),v=a(22553),f=a(29279),w=a(83381),j=a(1288),g=a(73232),y=a(7347),b=a(29296),N=a(39441),_=a(32426),E=a(46588),k=a(65139),T=a(26022);let C={CONFIRMATION_BLOCKS:1};var S=a(2492),I=a(58041),P=a(8866);let R=[{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]}];var F=a(2081),L=a(42712),A=a(6861),D=a(71308);let O={CONFIRMATION_BLOCKS:1};var z=a(53441),M=a(23750),U=a(35946),W=a(67464),V=a(58069),q=a(92468);let K=e=>j.Ik({amount:j.Yj().min(1,e("vault.amount_required"))}),J=(0,d.Fj)({base:"rounded-16 border bg-white-100 px-4 py-3 transition-colors",variants:{state:{default:"border-neutral-20",error:"border-danger-50"}},defaultVariants:{state:"default"}}),Q=(0,d.Fj)({base:"-mx-4 my-3 h-px w-[calc(100%+32px)] transition-colors",variants:{state:{default:"bg-neutral-10",error:"bg-danger-50"}},defaultVariants:{state:"default"}}),X=e=>{let{open:t,onOpenChange:a,vault:d,vaults:j,setActiveVault:X,onDepositSuccess:Y}=e,B=(0,u.c)(),H=(0,i.useToast)(),{address:$}=(0,v.F)(),G=(0,f.i)(),{switchChain:Z,isPending:ee}=(0,w.R)(),et=(0,p.mN)({resolver:(0,r.u)(K(B)),mode:"onChange",defaultValues:{amount:""}}),ea=(0,p.FH)({control:et.control,name:"amount"}),{mutate:es,isPending:en}=function(){let{address:e}=(0,v.F)(),{writeContractAsync:t}=(0,_.x)(),a=(0,E.U)(),{send:s}=(0,T.r)(),n=(0,i.useToast)(),r=(0,u.c)();return(0,y.n)({mutationKey:["approve-token-deposit",e],mutationFn:async i=>{let{token:l,amount:o,spenderAddress:d}=i;if(!e)throw Error(r("errors.wallet_not_connected"));if(!d||d===b.Xd)throw Error(r("errors.invalid_spender_address"));if(!o||0>=parseFloat(o))throw Error(r("errors.amount_greater_than_zero"));let c=(0,m.X)(o,l.decimals);s({type:"START_APPROVE_TOKEN",amount:o});try{let e=await t({address:l.address,abi:l.abi,functionName:"approve",args:[d,c]});s({type:"EXECUTE"});let{status:i}=await (0,k.n)(a,{hash:e,confirmations:C.CONFIRMATION_BLOCKS});if("reverted"===i)throw Error(r("errors.transaction_reverted"));s({type:"COMPLETE",amount:o}),n.positive(r("success.token_allowance_increased"))}catch(t){console.error("Failed to approve tokens:",t);let e=t instanceof N.C?t.shortMessage:r("errors.transaction_failed");throw n.negative(e),s({type:"REJECT"}),t}}})}(),{mutate:er,isPending:ei}=function(){let{address:e}=(0,v.F)(),{writeContractAsync:t}=(0,_.x)(),a=(0,E.U)(),{send:s}=(0,T.r)(),n=(0,i.useToast)(),r=(0,u.c)();return(0,y.n)({mutationKey:["pre-deposit-vault",e],mutationFn:async i=>{let{vault:l,amount:o}=i;if(!e)throw Error(r("errors.wallet_not_connected"));if(!o||0>=parseFloat(o))throw Error(r("errors.amount_greater_than_zero"));let d=(0,m.X)(o,l.token.decimals);s({type:"START_APPROVE_TOKEN",amount:o});try{let i=await t({address:l.address,abi:l.abi,functionName:"deposit",args:[d,e],chainId:l.chainId});s({type:"EXECUTE"});let{status:c}=await (0,k.n)(a,{hash:i,confirmations:O.CONFIRMATION_BLOCKS});if("reverted"===c)throw Error(r("errors.transaction_reverted"));s({type:"COMPLETE",amount:o}),n.positive(r("success.deposit_successful",{vault:l.name}))}catch(t){console.error("Failed to deposit into ".concat(l.name,": "),t),s({type:"REJECT"});let e=t instanceof D.C?t.shortMessage:r("errors.transaction_failed");throw n.negative(e),t}}})}(),{mutate:el,isPending:eo}=function(){let{address:e}=(0,v.F)(),{writeContractAsync:t}=(0,_.x)(),a=(0,E.U)(),s=(0,i.useToast)(),n=(0,u.c)();return(0,y.n)({mutationKey:["wrapETH",e],mutationFn:async r=>{let{amountWei:i}=r;if(!e)throw Error(n("errors.wallet_not_connected"));if(0n===i)throw Error(n("errors.amount_greater_than_zero"));try{let e=await t({address:P.dX.address,abi:U.d,functionName:"deposit",value:i,chainId:M.r.id}),{status:r}=await (0,k.n)(a,{hash:e,confirmations:O.CONFIRMATION_BLOCKS});if("reverted"===r)throw Error(n("errors.transaction_reverted"));s.positive(n("success.eth_wrapped"))}catch(t){console.error("Failed to wrap ETH: ",t);let e=t instanceof D.C?t.shortMessage:n("errors.transaction_failed");throw s.negative(e),t}}})}(),ed=(0,n.useMemo)(()=>{if(!d||!ea)return 0n;try{return(0,m.X)(ea,d.token.decimals)}catch(e){return 0n}},[ea,d]),{data:ec}=(0,A.R)({token:d.token.priceKey||d.token.symbol}),{data:eu}=(0,z.r)(),ep=null==eu?void 0:eu[d.address.toLowerCase()],eh=void 0!==ep?String(ep):null,em=(0,n.useMemo)(()=>{var e;let t=parseFloat(ea||"0"),a=t*(null!=(e=null==ec?void 0:ec.price)?e:0);return(0,h.YW)({exchangeRate:ec,amountInputNumber:t,calculatedUSD:a}).with({exchangeRate:h.P.nullish},()=>0).with({amountInputNumber:h.P.when(e=>isNaN(e)||e<=0)},()=>0).with({calculatedUSD:h.P.when(e=>!isFinite(e))},()=>null).with({calculatedUSD:h.P.when(e=>e>1e12)},()=>null).otherwise(e=>{let{calculatedUSD:t}=e;return t})},[ea,ec]),{actionState:ex,balance:ev,ethBalance:ef,maxDeposit:ew,minDeposit:ej,sharesValidation:eg,refetchAllowance:ey,refetchBalances:eb}=function(e){var t,a;let{vault:s,amountWei:r,address:i}=e,l=s.id===P.iX.id,{data:o,refetch:d}=(0,S.A)({address:i,token:s.token.address,query:{enabled:!!i},chainId:s.chainId}),{data:c,refetch:u}=(0,S.A)({address:i,query:{enabled:!!i&&l},chainId:s.chainId}),{data:p,refetch:m,isPending:x}=(0,I.Q)({address:s.token.address,abi:R,functionName:"allowance",args:i?[i,s.address]:void 0,query:{enabled:!!i},chainId:s.chainId}),{data:v}=function(e){let{vault:t}=e;return(0,I.Q)({abi:t.abi,address:t.address,functionName:"getDepositLimits",chainId:t.chainId,query:{enabled:null!==t,select:e=>({minDeposit:e[0],maxDeposit:e[1],maxTotalAssets:e[2]})}})}({vault:s}),f=null==v?void 0:v.maxDeposit,w=null==v?void 0:v.minDeposit,j=function(e){let{vault:t,depositAmount:a,enabled:s=!0}=e,n="weth"===t.token.symbol.toLowerCase(),r=(0,I.Q)({address:L.Z$.address,abi:F.DU,functionName:"getSharesByPooledEth",args:[a],query:{enabled:s&&n&&a>0n},chainId:t.chainId}),i=(0,I.Q)({address:t.address,abi:t.abi,functionName:"convertToShares",args:[a],query:{enabled:s&&!n&&a>0n},chainId:t.chainId}),{data:l,isLoading:o,isError:d,error:c}=n?r:i,{isValid:u,validationMessage:p}=(0,h.YW)({shares:l,isLoading:o,isError:d}).with({isLoading:!0},()=>({isValid:!0,validationMessage:void 0})).with({isError:!0},()=>({isValid:!1,validationMessage:"Error calculating your pre-deposit shares."})).with({shares:0n},()=>({isValid:!1,validationMessage:"This pre-deposit would result in 0 shares. Try to increase the amount."})).otherwise(()=>({isValid:!!l&&l>0n,validationMessage:void 0}));return{shares:l,isLoading:o,isError:d,error:c,isValid:u,validationMessage:p}}({vault:s,depositAmount:r,enabled:!!s&&r>0n}),g=(0,n.useMemo)(()=>{var e,t;if(0n===r)return"idle";if(!j.isValid)return"invalid-shares";let a=null!=(e=null==o?void 0:o.value)?e:0n,s=null!=(t=null==c?void 0:c.value)?t:0n,n=null!=p?p:0n,i=l?a+s:a;return(0,h.YW)({amountWei:r,currentBal:a,currentEthBal:s,totalAvailable:i,currentAllow:n,maxDeposit:f,minDeposit:w,isWETHVault:l}).with({amountWei:h.P.when(e=>e>i)},()=>"invalid-balance").with({maxDeposit:h.P.not(h.P.nullish),amountWei:h.P.when(e=>f&&e>f)},()=>"exceeds-max").with({minDeposit:h.P.not(h.P.nullish),amountWei:h.P.when(e=>w&&e<w)},()=>"below-min").with({isWETHVault:!0,amountWei:h.P.when(e=>e>a),currentEthBal:h.P.when(e=>e>0n)},()=>"needs-wrap").with({amountWei:h.P.when(e=>e>n)},()=>"approve").otherwise(()=>"deposit")},[r,o,c,p,f,w,j.isValid,l]),y=async()=>{await Promise.all([d(),l?u():Promise.resolve()])};return{actionState:g,balance:null!=(t=null==o?void 0:o.value)?t:0n,ethBalance:null!=(a=null==c?void 0:c.value)?a:0n,maxDeposit:f,minDeposit:w,sharesValidation:j,refetchAllowance:m,refetchBalances:y,isLoadingAllowance:x}}({vault:d,amountWei:ed,address:$}),eN=(0,n.useMemo)(()=>!!d&&!!G&&d.chainId!==G,[d,G]);if(!d)return null;let e_=en||ei||eo,eE=(0,h.YW)(ex).with(h.P.union("invalid-balance","exceeds-max","below-min","invalid-shares"),()=>!0).otherwise(()=>!1),ek=(0,h.YW)(ex).with("invalid-balance",()=>{let e="WETH"===d.id?(null!=ev?ev:0n)+(null!=ef?ef:0n):null!=ev?ev:0n;return B("vault.insufficient_balance",{max:(0,W.NJ)(e,d.token.symbol)})}).with("exceeds-max",()=>B("vault.exceeds_vault_limit",{max:(0,W.NJ)(null!=ew?ew:0n,d.token.symbol)})).with("below-min",()=>B("vault.below_minimum_deposit",{min:(0,W.NJ)(null!=ej?ej:0n,d.token.symbol)})).with("invalid-shares",()=>eg.validationMessage).otherwise(()=>{var e;return null==(e=et.formState.errors.amount)?void 0:e.message}),eT=!eE&&eg.validationMessage?eg.validationMessage:null;return(0,s.jsx)(q.j,{open:t,onOpenChange:a,onClose:()=>et.reset(),title:B("vault.deposit_funds"),description:B("vault.deposit_description"),children:(0,s.jsx)("form",{onSubmit:et.handleSubmit(e=>{d&&$&&!eN&&(0,h.YW)(ex).with("needs-wrap",()=>{let e=ed>ev?ed-ev:0n;el({amountWei:ef>e?e:ef},{onSuccess:async()=>{await eb(),H.positive(B("vault.eth_wrapped_success"))},onError:()=>{H.negative(B("vault.eth_wrap_failed"))}})}).with("approve",()=>{es({token:d.token,amount:e.amount,spenderAddress:d.address},{onSuccess:async()=>{await ey(),er({amount:e.amount,vault:d},{onSuccess:()=>{null==Y||Y(),a(!1)},onError:()=>{H.negative(B("vault.deposit_failed")),et.reset()}})}})}).with("deposit",()=>{er({amount:e.amount,vault:d},{onSuccess:()=>{null==Y||Y(),a(!1)},onError:()=>{H.negative(B("vault.deposit_failed")),et.reset()}})}).otherwise(()=>{})}),children:(0,s.jsxs)("div",{className:"space-y-4 px-4 pb-4",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"text-13 font-500 text-neutral-50",children:B("vault.select_token")}),(0,s.jsxs)(o.rI.bL,{modal:!0,children:[(0,s.jsxs)("button",{type:"button",className:"flex w-full items-center justify-between gap-2 rounded-12 border border-neutral-20 bg-white-100 px-3 py-[9px]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(c.default,{src:"/vaults/".concat(null==d?void 0:d.icon.toLowerCase(),".png"),alt:null==d?void 0:d.icon,width:"20",height:"20",className:"size-5 shrink-0"}),(0,s.jsxs)("span",{className:"text-15 font-400 text-neutral-100",children:[d.token.name,", ",d.token.symbol]})]}),(0,s.jsx)(l.FAx,{className:"shrink-0 text-neutral-40 transition-transform"})]}),(0,s.jsx)(o.rI.UC,{children:j.map(e=>(0,s.jsx)(o.rI.q7,{label:"".concat(e.token.name,", ").concat(e.token.symbol),selected:e.id===d.id,onSelect:()=>X(e),icon:e.icon.toLowerCase()},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"deposit-amount",className:"block text-13 font-500 text-neutral-50",children:B("vault.amount_to_deposit")}),(0,s.jsxs)("div",{className:J({state:eE?"error":"default"}),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("input",{id:"deposit-amount",inputMode:"decimal",...et.register("amount"),placeholder:"0",disabled:e_,className:"w-full border-none bg-transparent text-27 font-600 text-neutral-100 outline-none placeholder:text-neutral-40"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(V.Q,{vault:d.icon,network:d.network,size:"32"}),(0,s.jsx)("span",{className:"text-19 font-600 text-neutral-80",children:d.token.symbol})]})]}),(0,s.jsx)("div",{className:Q({state:eE?"error":"default"})}),(0,s.jsxs)("div",{className:"space-y-0.5 text-13 font-500 text-neutral-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:em?(0,W.vv)(em):"â€”"}),(0,s.jsxs)("button",{type:"button",disabled:e_,onClick:()=>{let e=null!=ev?ev:0n;ew&&e>ew&&(e=ew),et.setValue("amount",(0,x.J)(e,d.token.decimals))},className:"uppercase hover:text-neutral-80",children:[B("vault.max")," ",(0,W.NJ)(ev,d.token.symbol,{includeSymbol:!0})]})]}),"WETH"===d.id&&(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{children:[B("vault.available_eth_to_wrap")," ",(0,W.NJ)(ef,"ETH")]})})]})]}),ek&&(0,s.jsx)("p",{className:"text-13 text-danger-50",children:ek}),eT&&(0,s.jsx)("p",{className:"text-13 text-customisation-yellow-50",children:eT})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mb-2 text-13 font-500 text-neutral-50",children:B("vault.rewards")}),(0,s.jsxs)("div",{className:"flex flex-col flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-purple",children:(0,s.jsx)(g.ub,{})}),(0,s.jsx)("span",{className:"text-neutral-100",children:"KARMA"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-neutral-50",children:(0,s.jsx)(g.R3,{})}),(0,s.jsx)("span",{className:"text-neutral-100",children:eh?"".concat(eh,"% ").concat(B("vault.liquid_apy")):B("vault.liquid_apy_tbd")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-neutral-50",children:(0,s.jsx)(g.c1,{})}),(0,s.jsx)("span",{className:"text-neutral-100",children:d.rewards.map(e=>e.startsWith("vault.")?B(e):e).join(", ")})]})]})]}),(0,s.jsx)("div",{className:"flex w-full gap-3 pt-4",children:eN?(0,s.jsx)(o.$n,{type:"button",className:"w-full justify-center",onClick:()=>Z({chainId:d.chainId}),disabled:ee,children:ee?B("vault.switching"):B("vault.switch_network_to_deposit")}):(0,s.jsx)(o.$n,{type:"submit",className:"w-full justify-center",disabled:e_||eE||"idle"===ex,children:(0,h.YW)({action:ex,isApproving:en,isDepositing:ei,isWrapping:eo}).with({isWrapping:!0},()=>B("vault.wrapping_eth")).with({isApproving:!0},()=>B("vault.approving")).with({isDepositing:!0},()=>B("vault.depositing")).with({action:"needs-wrap"},()=>B("vault.wrap_eth_to_weth")).with({action:"approve"},()=>B("vault.approve_deposit")).with({action:"deposit"},()=>B("vault.deposit")).otherwise(()=>B("vault.enter_amount"))})})]})})})}},6861:(e,t,a)=>{a.d(t,{R:()=>l});var s=a(87579),n=a(53692);let r=a(34343).hI.NEXT_PUBLIC_STATUS_API_URL;async function i(e,t){var a,s,n;let i=new URL("".concat(r,"/api/trpc/market.tokenPrice"));i.searchParams.set("input",JSON.stringify({json:{symbols:[e]}}));let l=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error(t("errors.failed_fetch_exchange_rate",{token:e,status:l.status.toString(),statusText:l.statusText}));let o=await l.json(),d=null==o||null==(n=o.result)||null==(s=n.data)||null==(a=s.json)?void 0:a[e];if((null==d?void 0:d.usd)===void 0||(null==d?void 0:d.usd)===null)throw Error(t("errors.invalid_market_api_response",{token:e}));if(isNaN(d.usd))throw Error(t("errors.invalid_price_value",{token:e,price:d.usd.toString()}));return{price:d.usd,priceChange24h:d.usd_24h_change,timestamp:Date.now(),token:e}}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{token:t="SNT",enabled:a=!0,refetchInterval:r=6e4,staleTime:l=3e4}=e,o=(0,n.c)();return(0,s.I)({queryKey:["exchangeRate",t],queryFn:()=>i(t,o),enabled:a,refetchInterval:r,staleTime:l,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)})}},16947:(e,t,a)=>{a.d(t,{S:()=>o});var s=a(27274),n=a(51960),r=a(30703),i=a(53692);let l=["KARMA","LINEA","SNT","GUSD"],o=()=>{let e=(0,i.c)();return(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-start",children:[(0,s.jsx)("div",{className:"flex size-[22px] min-w-[50px] items-center -space-x-1.5",children:l.map(e=>(0,s.jsx)(r.default,{src:"/tokens/".concat(e.toLowerCase(),".png"),alt:e,width:"20",height:"20"},e))}),(0,s.jsxs)("p",{className:"text-15 text-neutral-60",children:[e("rewards.description"),(0,s.jsx)("br",{}),e("rewards.audited_prefix")," ",(0,s.jsx)(n.N_,{href:"https://github.com/aragon/status-predeposit-vaults/blob/development/audit/report-aragon-pre-deposit-vaults.pdf",target:"_blank",rel:"noopener noreferrer",className:"text-purple hover:text-purple-dark",children:e("rewards.audited_link")}),". ",e("rewards.deposit_confirmation")," ",(0,s.jsx)(n.N_,{href:"https://status.network/legal/status-network-pre-deposit-disclaimer",target:"_blank",rel:"noopener noreferrer",className:"text-purple hover:text-purple-dark",children:e("rewards.disclaimer")}),"."]})]})}},26022:(e,t,a)=>{a.d(t,{A:()=>l,r:()=>o});var s=a(27274),n=a(92834),r=a(38272);let i=(0,n.createContext)(null),l=e=>{let{children:t}=e,a=function(){let[e,t]=(0,n.useState)({type:"idle"}),a=(0,n.useCallback)(e=>{t(t=>(0,r.YW)([t,e]).with([{type:"idle"},{type:"START_APPROVE_TOKEN"}],e=>{let[,t]=e;return{type:"approveToken",step:"initialize",spender:t.spender,amount:t.amount}}).with([{type:"idle"},{type:"START_PRE_DEPOSIT"}],e=>{let[,t]=e;return{type:"preDeposit",step:"initialize",amount:t.amount}}).with([{type:"preDeposit",step:"initialize"},{type:"EXECUTE"}],()=>({type:"preDeposit",step:"processing"})).with([{type:"preDeposit",step:"initialize"},{type:"REJECT"}],()=>({type:"preDeposit",step:"rejected"})).with([{type:"preDeposit",step:"processing"},{type:"REJECT"}],()=>({type:"preDeposit",step:"rejected"})).with([{type:"preDeposit",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"preDeposit",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"approveToken",step:"initialize"},{type:"EXECUTE"}],e=>{let[t]=e;return{type:"approveToken",step:"processing",amount:t.amount}}).with([{type:"approveToken",step:"initialize"},{type:"REJECT"}],e=>{let[t]=e;return{type:"approveToken",step:"rejected",amount:t.amount}}).with([{type:"approveToken",step:"processing"},{type:"COMPLETE"}],e=>{let[t,a]=e;return{type:"approveToken",step:"initialize",amount:a.amount||t.amount||"0"}}).with([{type:"approveToken",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"approveToken",step:"rejected",amount:t.amount}}).with([{type:"approveToken",step:"rejected"},{type:"START_APPROVE_TOKEN"}],e=>{let[t,a]=e;return{type:"approveToken",step:"initialize",amount:a.amount||t.amount}}).with([{type:"approveToken",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"success"},{type:"RESET"}],()=>({type:"idle"})).otherwise(()=>t))},[]),s=(0,n.useCallback)(()=>{a({type:"RESET"})},[a]);return{state:e,send:a,reset:s}}();return(0,s.jsx)(i.Provider,{value:a,children:t})},o=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("usePreDepositStateContext must be used within PreDepositStateProvider");return e}},36931:(e,t,a)=>{a.d(t,{Tooltip:()=>l});var s=a(27274),n=a(92834),r=a(61404),i=a(26260);let l=e=>{let{children:t,content:a,delayDuration:l=0,sideOffset:o=8,...d}=e,[c,u]=(0,n.useState)(!1);return(0,s.jsx)(r.Kq,{children:(0,s.jsxs)(r.bL,{open:c,onOpenChange:u,delayDuration:l,children:[(0,s.jsx)(r.l9,{asChild:!0,children:n.cloneElement(t,{onClick:e=>{let a=t.props.onClick;a&&a(e),u(!0)}})}),(0,s.jsx)(r.ZL,{children:(0,s.jsx)(r.UC,{sideOffset:o,...d,className:(0,i.cx)("z-50 cursor-default rounded-8 border border-neutral-10 bg-white-100 px-3 py-1.5 text-13 font-medium shadow-3","dark:border-neutral-80 dark:bg-neutral-90 dark:text-white-100"),children:a})})]})})}},43091:(e,t,a)=>{a.d(t,{E:()=>r});var s=a(27274),n=a(26260);function r(e){let{width:t=32,height:a=32,className:r,...i}=e;return(0,s.jsx)("div",{className:(0,n.cx)("animate-skeleton overflow-hidden bg-neutral-10",r),style:{width:"number"==typeof t?"".concat(t,"px"):t,height:"number"==typeof a?"".concat(a,"px"):a,background:"linear-gradient(-90deg, #F0F2F5, #FCFCFC, #F0F2F5)",backgroundSize:"400% 400%"},...i})}(0,n.Fj)({base:"animate-skeleton overflow-hidden",variants:{variant:{primary:"bg-neutral-10",secondary:"bg-neutral-20"}},defaultVariants:{variant:"primary"}})},52980:(e,t,a)=>{a.d(t,{b:()=>N});var s=a(27274),n=a(92834),r=a(43091),i=a(51960),l=a(80583),o=a(26260),d=a(53692),c=a(22553),u=a(67464),p=a(93311),h=a(49535),m=a(6861),x=a(58041),v=a(53441),f=a(73232),w=a(86149),j=a(58069);let g=(0,o.Fj)({base:"relative flex size-full flex-col rounded-32 border border-neutral-20 bg-white-100 p-4 shadow-1 lg:p-8",variants:{disabled:{true:"pointer-events-none opacity-[.40]"}},defaultVariants:{disabled:!1}}),y=e=>{let{isConnected:t=!1}=e;return(0,s.jsxs)("div",{className:g(),children:[(0,s.jsx)("div",{className:"mb-6 flex items-start justify-between",children:(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(r.E,{width:56,height:56,className:"rounded-full"})})}),(0,s.jsx)(r.E,{width:180,height:28,className:"mb-2 rounded-8"}),t&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(r.E,{width:80,height:20,className:"mb-1 rounded-6"}),(0,s.jsx)(r.E,{width:120,height:32,className:"rounded-8"})]}),(0,s.jsxs)("ul",{className:"my-4 space-y-2",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.E,{width:20,height:20,className:"rounded-full"}),(0,s.jsx)(r.E,{width:50,height:20,className:"rounded-6"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.E,{width:20,height:20,className:"rounded-full"}),(0,s.jsx)(r.E,{width:120,height:20,className:"rounded-6"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.E,{width:20,height:20,className:"rounded-full"}),(0,s.jsx)(r.E,{width:140,height:20,className:"rounded-6"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.E,{width:20,height:20,className:"rounded-full"}),(0,s.jsx)(r.E,{width:100,height:20,className:"rounded-6"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.E,{width:20,height:20,className:"rounded-full"}),(0,s.jsx)(r.E,{width:100,height:20,className:"rounded-6"})]})]}),(0,s.jsx)(r.E,{width:90,height:40,className:"mt-auto rounded-12"})]})},b=e=>{var t;let{vault:a,onDeposit:l,registerRefetch:o,show:y,isConnected:b,pendingDepositRef:N}=e,{rewards:_,icon:E,token:k}=a,{data:T,isLoading:C}=function(e){let t,{vault:a}=e,s=(0,p.v)({vault:a}),n=(0,m.R)({token:a.token.priceKey||a.token.symbol});s.data&&n.data&&(t={tvlUSD:Number((0,h.J)(s.data,a.token.decimals))*n.data.price,totalAssets:s.data,exchangeRate:n.data.price});let r=s.isLoading||n.isLoading,i=s.isError||n.isError;return{data:t,isLoading:r,isError:i,error:s.error||n.error,isFetching:s.isFetching||n.isFetching}}({vault:a}),{data:S}=(0,p.v)({vault:a}),{data:I,isLoading:P}=(0,v.r)(),{data:R,isLoading:F}=function(e){let{vault:t,userAddress:a,registerRefetch:s}=e,{address:r}=(0,c.F)(),i=null!=a?a:r,{data:l,isLoading:o,refetch:d}=(0,x.Q)({abi:t.abi,address:t.address,chainId:t.chainId,functionName:"balanceOf",args:i?[i]:void 0,query:{enabled:!!i}}),{data:u,isLoading:p,refetch:h}=(0,x.Q)({abi:t.abi,address:t.address,chainId:t.chainId,functionName:"convertToAssets",args:void 0!==l?[l]:void 0,query:{enabled:void 0!==l&&l>0n}}),m=0n===l?0n:u,v=(0,n.useCallback)(()=>{d(),h()},[d,h]);return(0,n.useEffect)(()=>{null==s||s(t.id,v)},[t.id,s,v]),{data:m,shares:l,isLoading:o||p,refetch:v}}({vault:a,registerRefetch:o});(0,n.useEffect)(()=>{b&&N.current&&(N.current=!1,l())},[b,l,N]);let L=(0,d.c)(),A=a.address.toLowerCase(),D=!(void 0!==I&&A in I),O=null==I?void 0:I[A],z=void 0!==O?String(O):null,M=_.map(e=>e.startsWith("vault.")?L(e):e).join(", "),U=D?null:(0,u.vv)(null!=(t=null==T?void 0:T.tvlUSD)?t:0,{compact:!0}).replace("$",""),W=4*("WETH"===k.symbol),V=D?null:(0,u.NJ)(null!=S?S:0n,k.symbol,{tokenDecimals:k.decimals,decimals:W,includeSymbol:!0});return(0,s.jsxs)("div",{className:g({disabled:D}),children:[(0,s.jsxs)("div",{className:"mb-6 flex items-start justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(j.Q,{vault:E,network:a.network,size:"56"})}),(0,s.jsx)(w.I,{content:L("vault.apy_tooltip")})]}),(0,s.jsx)("h3",{className:"mb-2 text-19 font-600 lg:text-27",children:a.name}),!D&&b&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-15 font-400 text-neutral-50",children:L("vault.your_deposit")}),(0,s.jsx)("div",{className:"text-27 font-600",children:F?(0,s.jsx)(r.E,{width:120,height:32,className:"rounded-8"}):(0,u.NJ)(null!=R?R:0n,k.symbol,{tokenDecimals:k.decimals,decimals:W,includeSymbol:!0})})]}),(0,s.jsxs)("ul",{className:"my-4 space-y-2",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-purple",children:(0,s.jsx)(f.ub,{})}),(0,s.jsx)("span",{className:"text-neutral-100",children:"KARMA"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-neutral-50",children:(0,s.jsx)(f.R3,{})}),P?(0,s.jsx)(r.E,{width:120,height:20,className:"rounded-6"}):(0,s.jsx)("span",{children:z?"".concat(z,"% ").concat(L("vault.liquid_apy")):L("vault.liquid_apy_tbd")})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-neutral-50",children:(0,s.jsx)(f.c1,{})}),(0,s.jsx)("span",{children:M})]}),"GUSD"===a.id&&(0,s.jsxs)("li",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-neutral-50",children:(0,s.jsx)(f.fs,{})}),(0,s.jsx)("span",{children:L("vault.generic_protocol_points")})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-neutral-50",children:(0,s.jsx)(f.ah,{})}),C?(0,s.jsx)(r.E,{width:80,height:20,className:"rounded-6"}):(0,s.jsx)("span",{children:U?"$".concat(U," ").concat(L("vault.tvl")):L("vault.tvl_tbd")})]}),!D&&(0,s.jsxs)("li",{className:"flex items-center gap-2 text-15",children:[(0,s.jsx)("span",{className:"text-neutral-50",children:(0,s.jsx)(f.te,{})}),(0,s.jsx)("span",{children:V})]})]}),(0,s.jsx)(i.$n,{size:"40",onClick:()=>{b?l():(N.current=!0,null==y||y())},disabled:D,className:"mt-auto w-full justify-center lg:w-fit",children:D?L("vault.coming_soon"):L("vault.deposit")})]})},N=e=>{let t=(0,n.useRef)(!1),[a,r]=(0,n.useState)(!1),{isLoading:i}=(0,v.r)(),{isConnected:o}=(0,c.F)();return((0,n.useEffect)(()=>{r(!0)},[]),!a||i)?(0,s.jsx)(y,{isConnected:!!a&&o}):(0,s.jsx)(l.Lw.Custom,{children:a=>{let{show:n,isConnected:r}=a;return(0,s.jsx)(b,{...e,show:n,isConnected:r,pendingDepositRef:t})}})}},53441:(e,t,a)=>{a.d(t,{r:()=>i});var s=a(87579),n=a(53692),r=a(34343);function i(){let e=(0,n.c)();return(0,s.I)({queryKey:["vaults-apy"],queryFn:async()=>{let t=await fetch("".concat(r.hI.NEXT_PUBLIC_STATUS_NETWORK_API_URL,"/predeposit/vaults"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error(e("errors.failed_fetch_vaults_apy",{error:t.statusText}));let a=await t.json(),s={};for(let e of a.result)s[e.vaultAddress.toLowerCase()]=e.apy;return s}})}},58069:(e,t,a)=>{a.d(t,{Q:()=>u});var s=a(27274),n=a(26260),r=a(30703),i=a(38272),l=a(23750),o=a(77379);let d=(0,n.Fj)({base:"relative",variants:{size:{32:"size-8",56:"size-14"}},defaultVariants:{size:"32"}}),c=(0,n.Fj)({base:"absolute rounded-full border-2 border-white-100 bg-white-100",variants:{size:{32:"-bottom-1 -right-1 size-3",56:"-bottom-1 -right-1 size-5"}},defaultVariants:{size:"32"}});function u(e){let{vault:t,network:a,size:n}=e,u=(0,i.YW)(a).with(l.r.name,()=>"/networks/ethereum.png").with(o._.name,()=>"/networks/linea.png").exhaustive();return(0,s.jsxs)("div",{className:d({size:n}),children:[(0,s.jsx)(r.default,{src:"/vaults/".concat(t.toLowerCase(),".png"),alt:t,width:"32"===n?32:56,height:"32"===n?32:56,quality:"100"}),(0,s.jsx)(r.default,{src:u,alt:a,width:"32"===n?12:20,height:"32"===n?12:20,className:c({size:n})})]})}},86149:(e,t,a)=>{a.d(t,{I:()=>d});var s=a(27274),n=a(36931),r=a(63207),i=a(51960),l=a(53692),o=a(2065);function d(e){let{content:t,link:a}=e,d=(0,l.c)();return(0,s.jsx)(n.Tooltip,{delayDuration:o.j2.DELAY_DURATION,side:"top",className:"border-0",content:(0,s.jsxs)("div",{className:"flex w-[286px] flex-col gap-4 rounded-8 bg-white-100 p-4",children:[(0,s.jsx)("span",{className:"text-13 text-neutral-100",children:t}),a&&(0,s.jsx)(i.vx,{href:a,variant:"outline",className:"rounded-8 px-2 py-1",size:"32",icon:(0,s.jsx)(r.XM,{className:"size-3 text-neutral-50"}),children:d("common.learn_more")})]}),children:(0,s.jsx)(r.mo,{className:"size-4 text-neutral-40 hover:text-neutral-100"})})}},92468:(e,t,a)=>{a.d(t,{j:()=>l});var s=a(27274),n=a(92834),r=a(99602),i=a(53540);function l(e){let{open:t,onOpenChange:a,onClose:l,title:o,description:d,children:c,trigger:u}=e;return(0,n.useEffect)(()=>{if(!1===t){let e=setTimeout(()=>{let e=document.body;e&&e.style.removeProperty("pointer-events")},0);return()=>clearTimeout(e)}},[t]),(0,n.useEffect)(()=>()=>{let e=document.body;e&&e.style.removeProperty("pointer-events")},[]),(0,s.jsxs)(r.bL,{open:t,onOpenChange:e=>{null==a||a(e),e||l()},children:[u&&(0,s.jsx)(r.l9,{asChild:!0,children:u}),(0,s.jsxs)(r.ZL,{children:[(0,s.jsx)(r.hJ,{className:"fixed inset-0 z-40 bg-neutral-80/60 backdrop-blur-sm"}),(0,s.jsx)(r.UC,{className:"fixed inset-x-0 top-0 z-50 flex size-full max-w-[480px] flex-col items-center justify-center p-4 focus:outline-none md:left-1/2 md:top-1/2 md:h-auto md:-translate-x-1/2 md:-translate-y-1/2 md:py-0",children:(0,s.jsxs)("div",{className:"relative mx-auto w-full max-w-[480px] overflow-y-auto rounded-20 bg-white-100 shadow-3 max-md:max-h-full",children:[(0,s.jsx)(r.bm,{asChild:!0,children:(0,s.jsx)("button",{"aria-label":"Close",className:"absolute right-3 top-3 z-50 flex size-8 items-center justify-center rounded-10 border border-neutral-80/10 backdrop-blur-[20px] transition-colors hover:bg-neutral-10 focus:outline-none",children:(0,s.jsx)(i.USm,{className:"text-neutral-100"})})}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,s.jsx)(r.hE,{asChild:!0,children:(0,s.jsx)("div",{className:"flex w-full items-center gap-1.5",children:(0,s.jsx)("span",{className:"shrink-0 grow basis-0 text-19 font-semibold text-neutral-100",children:o})})}),(0,s.jsx)(r.VY,{asChild:!0,children:(0,s.jsx)("div",{className:"flex w-full flex-col justify-center text-15 text-neutral-100",children:(0,s.jsx)("span",{children:d})})})]}),c]})})]})]})}},93311:(e,t,a)=>{a.d(t,{v:()=>n});var s=a(58041);function n(e){let{vault:t}=e;return(0,s.Q)({abi:t.abi,address:t.address,chainId:t.chainId,functionName:"totalAssets",query:{enabled:null!==t}})}},93870:(e,t,a)=>{a.d(t,{O:()=>i});var s=a(92834),n=a(42712),r=a(53441);function i(){var e;let[t,a]=(0,s.useState)(null),{registerRefetch:i,refetchVault:l}=function(){let e=(0,s.useRef)({});return{registerRefetch:(0,s.useCallback)((t,a)=>{e.current[t]=a},[]),refetchVault:(0,s.useCallback)(t=>{if(t){var a,s;null==(a=(s=e.current)[t.id])||a.call(s)}},[])}}(),{data:o}=(0,r.r)(),d=null!=(e=n.Qt.find(e=>"SNT"===e.id))?e:n.Qt[0];return{selectedVault:t,setSelectedVault:a,defaultVault:d,activeVaults:(0,s.useMemo)(()=>o?n.Qt.filter(e=>e.address.toLowerCase()in o):n.Qt,[o]),registerRefetch:i,openModal:e=>a(e),closeModal:()=>a(null),handleDepositSuccess:()=>l(t),isModalOpen:null!==t}}}}]);