"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4010],{18962:(e,t,a)=>{a.d(t,{V:()=>p,c:()=>l});var n=a(27274),r=a(92834),i=a(38272);let s=(0,r.createContext)(null),p=e=>{let{children:t}=e,a=function(){let[e,t]=(0,r.useState)({type:"idle"}),a=(0,r.useCallback)(e=>{t(t=>(0,i.YW)([t,e]).with([{type:"idle"},{type:"START_SIWE"}],()=>({type:"siwe",step:"initialize"})).with([{type:"idle"},{type:"START_CREATE_VAULT"}],()=>({type:"createVault",step:"initialize"})).with([{type:"idle"},{type:"START_INCREASE_ALLOWANCE"}],e=>{let[,t]=e;return{type:"increaseAllowance",step:"initialize",amount:t.amount}}).with([{type:"idle"},{type:"START_STAKING"}],e=>{let[,t]=e;return{type:"staking",step:"initialize",amount:t.amount}}).with([{type:"idle"},{type:"START_COMPOUND"}],e=>{let[,t]=e;return{type:"compound",step:"initialize",amount:t.amount}}).with([{type:"siwe",step:"initialize"},{type:"SIGN"}],()=>({type:"siwe",step:"processing"})).with([{type:"siwe",step:"initialize"},{type:"REJECT"}],()=>({type:"siwe",step:"rejected"})).with([{type:"siwe",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"siwe",step:"processing"},{type:"REJECT"}],()=>({type:"siwe",step:"rejected"})).with([{type:"siwe",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"siwe",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"createVault",step:"initialize"},{type:"SIGN"}],()=>({type:"createVault",step:"processing"})).with([{type:"createVault",step:"initialize"},{type:"REJECT"}],()=>({type:"createVault",step:"rejected"})).with([{type:"createVault",step:"processing"},{type:"REJECT"}],()=>({type:"createVault",step:"rejected"})).with([{type:"createVault",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"createVault",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"increaseAllowance",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"increaseAllowance",step:"processing",amount:t.amount}}).with([{type:"increaseAllowance",step:"initialize"},{type:"REJECT"}],e=>{let[t]=e;return{type:"increaseAllowance",step:"rejected",amount:t.amount}}).with([{type:"increaseAllowance",step:"processing"},{type:"COMPLETE"}],e=>{let[t,a]=e;return{type:"staking",step:"initialize",amount:a.amount||t.amount||"0"}}).with([{type:"increaseAllowance",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"increaseAllowance",step:"rejected",amount:t.amount}}).with([{type:"increaseAllowance",step:"rejected"},{type:"START_INCREASE_ALLOWANCE"}],e=>{let[t,a]=e;return{type:"increaseAllowance",step:"initialize",amount:a.amount||t.amount}}).with([{type:"increaseAllowance",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"staking",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"staking",step:"processing",amount:t.amount}}).with([{type:"staking",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"staking",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"staking",step:"rejected",amount:t.amount}}).with([{type:"staking",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"staking",step:"rejected"},{type:"START_STAKING"}],e=>{let[t,a]=e;return{type:"staking",step:"initialize",amount:a.amount||t.amount}}).with([{type:"staking",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"idle"},{type:"START_UNSTAKING"}],e=>{let[,t]=e;return{type:"unstaking",step:"initialize",amount:t.amount}}).with([{type:"unstaking",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"unstaking",step:"processing",amount:t.amount}}).with([{type:"unstaking",step:"initialize"},{type:"REJECT"}],e=>{let[t]=e;return{type:"unstaking",step:"rejected",amount:t.amount}}).with([{type:"unstaking",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"unstaking",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"unstaking",step:"rejected",amount:t.amount}}).with([{type:"unstaking",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"unstaking",step:"rejected"},{type:"START_UNSTAKING"}],e=>{let[t,a]=e;return{type:"unstaking",step:"initialize",amount:a.amount||t.amount}}).with([{type:"unstaking",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"idle"},{type:"START_WITHDRAW"}],e=>{let[,t]=e;return{type:"withdraw",step:"processing",amount:t.amount}}).with([{type:"withdraw",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"withdraw",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"withdraw",step:"rejected",amount:t.amount}}).with([{type:"withdraw",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"idle"},{type:"START_LOCK"}],()=>({type:"lock",step:"initialize"})).with([{type:"lock",step:"initialize"},{type:"SIGN"}],()=>({type:"lock",step:"processing"})).with([{type:"lock",step:"initialize"},{type:"REJECT"}],()=>({type:"lock",step:"rejected"})).with([{type:"lock",step:"processing"},{type:"REJECT"}],()=>({type:"lock",step:"rejected"})).with([{type:"lock",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"lock",step:"rejected"},{type:"START_LOCK"}],()=>({type:"lock",step:"initialize"})).with([{type:"lock",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"compound",step:"initialize"},{type:"SIGN"}],e=>{let[t]=e;return{type:"compound",step:"processing",amount:t.amount}}).with([{type:"compound",step:"initialize"},{type:"REJECT"}],e=>{let[t]=e;return{type:"compound",step:"rejected",amount:t.amount}}).with([{type:"compound",step:"processing"},{type:"COMPLETE"}],()=>({type:"success"})).with([{type:"compound",step:"processing"},{type:"REJECT"}],e=>{let[t]=e;return{type:"compound",step:"rejected",amount:t.amount}}).with([{type:"compound",step:"processing"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"compound",step:"rejected"},{type:"START_COMPOUND"}],e=>{let[t,a]=e;return{type:"compound",step:"initialize",amount:a.amount||t.amount}}).with([{type:"compound",step:"rejected"},{type:"RESET"}],()=>({type:"idle"})).with([{type:"success"},{type:"RESET"}],()=>({type:"idle"})).otherwise(()=>t))},[]),n=(0,r.useCallback)(()=>{a({type:"RESET"})},[a]);return{state:e,send:a,reset:n}}();return(0,n.jsx)(s.Provider,{value:a,children:t})},l=()=>{let e=(0,r.useContext)(s);if(!e)throw Error("useVaultStateContext must be used within VaultStateProvider");return e}},34490:(e,t,a)=>{a.d(t,{C:()=>h});var n=a(87579),r=a(22553),i=a(46588),s=a(29279),p=a(86436),l=a(42712),o=a(88798);let u={MULTIPLIER_POINTS:"multiplier-points-balance"},c={vaultBalances:{},totalUncompounded:l._s,totalMpRedeemed:l._s};async function d(e,t){return await (0,p.J)(e,{address:l.Sj.address,abi:l.Sj.abi,functionName:"mpBalanceOf",args:[t]})}async function y(e,t,a){try{return await (0,p.J)(e,{chainId:t,address:l.Sj.address,abi:l.Sj.abi,functionName:"mpBalanceOfAccount",args:[a]})}catch(e){return console.error("Failed to fetch account MP redeemed for ".concat(a,":"),e instanceof Error?e.message:String(e)),l._s}}function h(){let{address:e}=(0,r.F)(),t=(0,i.U)(),a=(0,s.i)(),{data:p}=(0,o.E)();return(0,n.I)({queryKey:[u.MULTIPLIER_POINTS,e,null==p?void 0:p.length],queryFn:async()=>{if(!p||0===p.length||!e||!a)return c;try{let n=p.map(e=>e.address),r=await Promise.all(n.map(e=>d(t,e))),i=n.reduce((e,t,a)=>(e[t]=r[a],e),{}),s=await y(t,a,e),o=p.reduce((e,t)=>{var a,n,r;let s=null!=(n=i[t.address])?n:l._s,p=null!=(r=null==(a=t.data)?void 0:a.mpAccrued)?r:l._s;return e+(s>p?s-p:l._s)},l._s);return{vaultBalances:i,totalUncompounded:o,totalMpRedeemed:s}}catch(e){return console.error("Failed to fetch multiplier points balances:",e),c}},enabled:!!e&&!!p&&p.length>0,staleTime:l.WS.MP_STALE_TIME,refetchInterval:l.WS.MP_REFETCH_INTERVAL})}},36931:(e,t,a)=>{a.d(t,{Tooltip:()=>p});var n=a(27274),r=a(92834),i=a(61404),s=a(26260);let p=e=>{let{children:t,content:a,delayDuration:p=0,sideOffset:l=8,...o}=e,[u,c]=(0,r.useState)(!1);return(0,n.jsx)(i.Kq,{children:(0,n.jsxs)(i.bL,{open:u,onOpenChange:c,delayDuration:p,children:[(0,n.jsx)(i.l9,{asChild:!0,children:r.cloneElement(t,{onClick:e=>{let a=t.props.onClick;a&&a(e),c(!0)}})}),(0,n.jsx)(i.ZL,{children:(0,n.jsx)(i.UC,{sideOffset:l,...o,className:(0,s.cx)("z-50 cursor-default rounded-8 border border-neutral-10 bg-white-100 px-3 py-1.5 text-13 font-medium shadow-3","dark:border-neutral-80 dark:bg-neutral-90 dark:text-white-100"),children:a})})]})})}},51026:(e,t,a)=>{a.d(t,{e:()=>l});var n=a(92834),r=a(49535),i=a(22553),s=a(42712);function p(e,t){return Number((0,r.J)(e,t))}function l(e){let{isConnected:t}=(0,i.F)();return(0,n.useMemo)(()=>t?e&&0!==e.length?function(e,t){let a=0,n=0;for(let r of e){if(!r.data||0n===r.data.stakedBalance)continue;let e=p(r.data.stakedBalance,t);a+=function(e,t,a){let n=p(e,a),r=p(t,a);return 0===n?s.kV:r/n+s.kV}(r.data.stakedBalance,r.data.mpAccrued,t)*e,n+=e}if(0===n)return{value:s.kV,formatted:s.kV.toFixed(s.fI),totalStaked:0,hasStake:!1};let r=a/n;return{value:r,formatted:"x".concat(r.toFixed(s.b7)),totalStaked:n,hasStake:!0}}(e,s.YR.decimals):{value:s.kV,formatted:"x".concat(s.kV.toFixed(s.fI)),totalStaked:0,hasStake:!1}:{value:Number(0),formatted:Number(0).toFixed(s.b7).toString(),totalStaked:0,hasStake:!1},[e,t])}},84107:(e,t,a)=>{a.d(t,{IconButton:()=>s});var n=a(27274),r=a(92834);let i=(0,a(26260).Fj)({base:["inline-flex size-8 cursor-pointer items-center justify-center rounded-10 border transition-all","outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-customisation-50 focus-visible:ring-offset-2","disabled:cursor-default disabled:opacity-[.3]"],variants:{variant:{default:["border-transparent bg-neutral-10 text-neutral-50 active:border-neutral-20 active:bg-neutral-10 active:text-neutral-100 hover:bg-neutral-20","dark:bg-neutral-90 dark:text-neutral-40 dark:active:border-neutral-60 dark:active:bg-neutral-80/70 dark:active:text-white-100 dark:hover:bg-neutral-80"],outline:["border-neutral-30 text-neutral-50 active:border-neutral-20 active:bg-neutral-10 active:text-neutral-100 hover:border-neutral-40","dark:border-neutral-70 dark:text-neutral-40 dark:active:border-neutral-60 dark:active:bg-neutral-80/70 dark:active:text-white-100 dark:hover:bg-neutral-60"],ghost:["border-transparent text-neutral-50 active:border-neutral-20 active:bg-neutral-10 active:text-neutral-100 hover:bg-neutral-10","dark:text-neutral-40 dark:active:border-neutral-60 dark:active:bg-neutral-80/70 dark:active:text-white-100 dark:hover:bg-neutral-80/70"]}}}),s=(0,r.forwardRef)((e,t)=>{let{variant:a="default",onPress:r,icon:s,...p}=e;return(0,n.jsx)("button",{...p,onClick:r,ref:t,className:i({variant:a}),children:s})})},88798:(e,t,a)=>{a.d(t,{E:()=>E});var n=a(52539),r=a(87579),i=a(53692),s=a(22553),p=a(46588),l=a(29279),o=a(86436),u=a(99602),c=a(70139),d=a(94671),y=a(42712);async function h(e,t,a){return await (0,o.J)(e,{chainId:t,address:y.Sj.address,abi:y.Sj.abi,functionName:"getAccountVaults",args:[a]})}async function w(e,t,a){try{let[n,r,i]=await (0,u.I)(e,{contracts:[{chainId:t,address:y.Sj.address,abi:y.Sj.abi,functionName:"getVault",args:[a]},{chainId:t,address:a,abi:d.re,functionName:"lockUntil",args:[]},{chainId:t,address:y.YR.address,abi:y.YR.abi,functionName:"balanceOf",args:[a]}]});("success"!==n.status||"success"!==r.status||"success"!==i.status)&&console.error("Failed to fetch vault data for ".concat(a,":"),"success"!==n.status?n.error:"success"!==r.status?r.error:i.error);let s=n.result,p=r.result,l=i.result;return{...s,lockUntil:p,depositedBalance:l}}catch(e){return console.error("Failed to fetch vault data for ".concat(a,":"),e instanceof Error?e.message:String(e)),null}}async function m(e,t,a){let n=await w(e,t,a);return{address:a,data:n}}function E(e){var t,a;let{address:o}=(0,s.F)(),u=(0,p.U)(),d=(0,l.i)(),w=(0,n.useToast)(),E=(0,i.c)(),g=d===c.M.id;return(0,r.I)({queryKey:["staking-vaults",o,d],queryFn:async()=>{if(!o)return[];try{let e=await h(u,d,o);return await Promise.all(e.map(e=>m(u,d,e)))}catch(e){throw w.negative(E("errors.failed_fetch_vaults",{error:e instanceof Error?e.message:"Unknown error"})),e}},enabled:(null!=(t=null==e?void 0:e.enabled)?t:!!o)&&g,staleTime:null!=(a=null==e?void 0:e.staleTime)?a:y.WS.DEFAULT_STALE_TIME,refetchInterval:null==e?void 0:e.refetchInterval})}}}]);