(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4732],{4271:(e,t,a)=>{"use strict";a.d(t,{v:()=>d});var s=a(27274),l=a(92834),n=a(26260);let r=(0,n.Fj)({base:["inline-flex shrink-0 items-center justify-center gap-1 border border-neutral-20 font-medium transition-all hover:border-neutral-30","outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-customisation-50 focus-visible:ring-offset-2","disabled:cursor-default disabled:opacity-[.3]","dark:border-neutral-80 dark:text-white-100 dark:hover:border-neutral-60"],variants:{size:{32:"h-8 rounded-20 px-3 text-15",24:"h-6 rounded-20 px-2 text-13"},selected:{true:"!border-customisation-50 bg-customisation-50/10 dark:!border-customisation-60"},iconOnly:{true:"aspect-square !rounded-full !px-0"},disabled:{true:"pointer-events-none cursor-default border-neutral-20 opacity-[.3]"}}}),i=(0,n.Fj)({base:"shrink-0 text-neutral-50 dark:text-blur-white/70 [&>svg]:size-full",variants:{placement:{left:"-ml-0.5",right:"-mr-0.5"},iconOnly:{true:"!m-0"},size:{32:"size-5",24:"size-3"}}}),d=(0,l.forwardRef)(function(e,t){let{size:a="32",icon:n,iconPlacement:d="left",label:c,...o}=e,u=!!(n&&!c),x=(0,s.jsxs)(s.Fragment,{children:[n&&"left"===d&&(0,s.jsx)("span",{className:i({size:a,placement:"left",iconOnly:u}),children:(0,l.cloneElement)(n)}),c&&(0,s.jsx)("span",{className:"flex-1 whitespace-nowrap",children:c}),n&&"right"===d&&(0,s.jsx)("span",{className:i({size:a,placement:"right",iconOnly:u}),children:(0,l.cloneElement)(n)})]});if("onPress"in e){let{selected:l,disabled:n,...i}=e;return(0,s.jsx)("button",{...i,onClick:e.onPress,ref:t,"data-selected":l||void 0,className:r({size:a,selected:l,disabled:n,iconOnly:u}),children:x})}return(0,s.jsx)("div",{...o,ref:t,className:r({size:a,iconOnly:u}),children:x})})},6861:(e,t,a)=>{"use strict";a.d(t,{R:()=>i});var s=a(87579),l=a(53692);let n=a(34343).hI.NEXT_PUBLIC_STATUS_API_URL;async function r(e,t){var a,s,l;let r=new URL("".concat(n,"/api/trpc/market.tokenPrice"));r.searchParams.set("input",JSON.stringify({json:{symbols:[e]}}));let i=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw Error(t("errors.failed_fetch_exchange_rate",{token:e,status:i.status.toString(),statusText:i.statusText}));let d=await i.json(),c=null==d||null==(l=d.result)||null==(s=l.data)||null==(a=s.json)?void 0:a[e];if((null==c?void 0:c.usd)===void 0||(null==c?void 0:c.usd)===null)throw Error(t("errors.invalid_market_api_response",{token:e}));if(isNaN(c.usd))throw Error(t("errors.invalid_price_value",{token:e,price:c.usd.toString()}));return{price:c.usd,priceChange24h:c.usd_24h_change,timestamp:Date.now(),token:e}}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{token:t="SNT",enabled:a=!0,refetchInterval:n=6e4,staleTime:i=3e4}=e,d=(0,l.c)();return(0,s.I)({queryKey:["exchangeRate",t],queryFn:()=>r(t,d),enabled:a,refetchInterval:n,staleTime:i,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)})}},43091:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(27274),l=a(26260);function n(e){let{width:t=32,height:a=32,className:n,...r}=e;return(0,s.jsx)("div",{className:(0,l.cx)("animate-skeleton overflow-hidden bg-neutral-10",n),style:{width:"number"==typeof t?"".concat(t,"px"):t,height:"number"==typeof a?"".concat(a,"px"):a,background:"linear-gradient(-90deg, #F0F2F5, #FCFCFC, #F0F2F5)",backgroundSize:"400% 400%"},...r})}(0,l.Fj)({base:"animate-skeleton overflow-hidden",variants:{variant:{primary:"bg-neutral-10",secondary:"bg-neutral-20"}},defaultVariants:{variant:"primary"}})},47159:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>e9});var s=a(27274),l=a(53692),n=a(11356),r=a(92834),i=a(43091);let d=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12","aria-hidden":!0,focusable:!1,...e,children:[(0,s.jsxs)("g",{clipPath:"url(#prefix__clip0_691_20)",children:[(0,s.jsx)("circle",{cx:6,cy:6,r:6,fill:"#647084"}),(0,s.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M5.45 6.55V9h1.1V6.55H9v-1.1H6.55V3h-1.1v2.45H3v1.1h2.45Z",clipRule:"evenodd"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"prefix__clip0_691_20",children:(0,s.jsx)("rect",{width:12,height:12,fill:"#fff",rx:6})})})]}),c=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12","aria-hidden":!0,focusable:!1,...e,children:[(0,s.jsx)("g",{clipPath:"url(#prefix__clip0_2283_851)",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.55 6a4.45 4.45 0 1 1 8.9 0 4.45 4.45 0 0 1-8.9 0ZM6 .45a5.55 5.55 0 1 0 0 11.1A5.55 5.55 0 0 0 6 .45ZM5.45 7l-.2-4h1.5l-.2 4h-1.1Zm1.17 1.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0Z",clipRule:"evenodd"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"prefix__clip0_2283_851",children:(0,s.jsx)("path",{fill:"#fff",d:"M0 0h12v12H0z"})})})]}),o=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12","aria-hidden":!0,focusable:!1,...e,children:[(0,s.jsx)("g",{clipPath:"url(#prefix__clip0_1336_287)",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.55 6a4.45 4.45 0 1 1 8.9 0 4.45 4.45 0 0 1-8.9 0ZM6 .45a5.55 5.55 0 1 0 0 11.1A5.55 5.55 0 0 0 6 .45Zm.55 4.8.2 4h-1.5l.2-4h1.1ZM5.38 3.625a.625.625 0 1 0 1.25 0 .625.625 0 0 0-1.25 0Z",clipRule:"evenodd"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"prefix__clip0_1336_287",children:(0,s.jsx)("path",{fill:"#fff",d:"M0 0h12v12H0z"})})})]}),u=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12","aria-hidden":!0,focusable:!1,...e,children:[(0,s.jsx)("g",{clipPath:"url(#prefix__clip0_6873_81)",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.55 6a4.45 4.45 0 1 1 8.9 0 4.45 4.45 0 0 1-8.9 0ZM6 .45a5.55 5.55 0 1 0 0 11.1A5.55 5.55 0 0 0 6 .45ZM5.45 3.5v2.775l.22.165 2 1.5.66-.88-1.78-1.335V3.5h-1.1Z",clipRule:"evenodd"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"prefix__clip0_6873_81",children:(0,s.jsx)("path",{fill:"#fff",d:"M0 0h12v12H0z"})})})]});var x=a(51960),m=a(34512),h=a(20791),p=a(80583),f=a(22553),j=a(29279),b=a(52539),v=a(7347),g=a(32426),N=a(46588),w=a(65139),y=a(42712),_=a(88798),k=a(18962);let E=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4));function C(){let{address:e}=(0,f.F)(),{writeContractAsync:t}=(0,g.x)(),{refetch:a}=(0,_.E)(),{send:s,reset:n}=(0,k.c)(),r=(0,N.U)(),i=(0,b.useToast)(),d=(0,l.c)();return(0,v.n)({mutationKey:["create-vault",e],mutationFn:async()=>{if(!e)throw Error(d("errors.wallet_not_connected"));s({type:"START_CREATE_VAULT"});try{let e=await t({address:y.Ot.address,abi:y.Ot.abi,functionName:"createVault"});s({type:"SIGN"});let{status:l,logs:c}=await (0,w.n)(r,{hash:e,confirmations:y.bI});if("reverted"===l)throw s({type:"REJECT"}),Error(d("errors.transaction_reverted"));let o=function(e,t){let a=e.find(e=>e.address.toLowerCase()===y.Ot.address.toLowerCase()&&e.topics[0]===y.sE);if(!a||!a.topics[1])throw Error(t("errors.vault_created_event_not_found"));let s=a.topics[1];return"0x".concat(s.slice(26))}(c,d);return i.positive(d("success.vault_created",{address:E(o)})),await new Promise(e=>setTimeout(e,y.HL)),n(),await a(),e}catch(e){throw s({type:"REJECT"}),e}}})}var S=a(58041);function F(){return(0,S.Q)({address:y.Sj.address,abi:y.Sj.abi,functionName:"emergencyModeEnabled",query:{refetchInterval:y.WS.EMERGENCY_MODE_REFETCH_INTERVAL}})}var I=a(11275),z=a(84107),T=a(53540),R=a(49535),A=a(67464);function D(e){if(!e)return!1;let t=Math.floor(Date.now()/y.ST.MILLISECONDS_PER_SECOND);return Number(e)>t}var M=a(2081);let L=(e,t,a)=>t?a("success.lock_time_extended"):a("success.vault_locked",{address:E(e)});var O=a(92468);let Y={SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24},U=Y.SECONDS_PER_MINUTE*Y.MINUTES_PER_HOUR*Y.HOURS_PER_DAY,P={INITIAL_YEARS:"0.25",INITIAL_DAYS:"90"};var B=a(58449),q=a(86467),K=a(26260),J=a(38272);let V=e=>{let t=e.reduce((e,t)=>e+=t[0],0),a=0;return e.reduce((s,l,n)=>{let[r,i]=l,d=$[i],c=Math.round(a+360*r/t);return s+="".concat(d," ").concat(a,"deg ").concat(c,"deg"),n!==e.length-1&&(s+=", "),a=c,s},"")},$=["#000000","#726F6F","#C4C4C4","#E7E7E7","#FFFFFF","#00FF00","#009800","#B8FFBB","#FFC413","#9F5947","#FFFF00","#A8AC00","#FFFFB0","#FF5733","#FF0000","#9A0000","#FF9D9D","#FF0099","#C80078","#FF00FF","#900090","#FFB0FF","#9E00FF","#0000FF","#000086","#9B81FF","#3FAEF9","#9A6600","#00FFFF","#008694","#C2FFFF","#00F0B6"],H=e=>{let t="colorHash"in e?e.colorHash:void 0,a=(0,r.useMemo)(()=>{if(t)return"conic-gradient(from 90deg, ".concat(V(t),")")},[t]);return(0,J.YW)(e).with({type:"user"},e=>{let{size:t,src:l,name:n}=e;return(0,s.jsx)("div",{className:X({size:t,rounded:"full",padding:a?t:void 0}),style:{background:a},children:l?(0,s.jsx)("img",{src:l,alt:n,className:"size-full rounded-full object-cover"}):(0,s.jsx)("div",{className:"flex size-full select-none items-center justify-center rounded-full bg-customisation-50 text-blur-white/70",children:n?n.slice(0,28>Number(t)?1:2).toUpperCase():"?"})})}).with({type:"channel"},e=>{let{size:t,emoji:a}=e;return(0,s.jsx)("div",{className:X({size:t,rounded:"full",className:"bg-customisation-50/10"}),children:(0,s.jsx)("span",{className:"select-none text-customisation-50",children:a})})}).with({type:"community"},e=>{let{size:t,src:a,name:l}=e;return(0,s.jsx)("div",{className:X({size:t,rounded:"full"}),children:a?(0,s.jsx)("img",{src:a,alt:l,className:"size-full object-cover"}):(0,s.jsx)("div",{className:"flex size-full select-none items-center justify-center bg-neutral-95 text-neutral-50",children:l?l.charAt(0).toUpperCase():"?"})})}).with({type:"icon"},e=>{let{icon:t,size:a}=e;return(0,s.jsx)("div",{className:X({size:a,rounded:"full",className:"bg-customisation-50/20"}),children:t&&(0,r.cloneElement)(t,{className:"text-customisation-50"})})}).with({type:"account"},e=>{let{size:t,bgOpacity:a}=e;return(0,s.jsx)("div",{className:X({accountSize:t,rounded:t,background:a}),children:(0,s.jsx)("div",{className:"flex size-full select-none items-center justify-center text-white-100",children:e.emoji})})}).exhaustive()},X=(0,K.Fj)({base:"relative flex items-center justify-center overflow-hidden",variants:{size:{80:"size-20 text-27",64:"size-16 text-19",56:"size-14 text-19",48:"size-12 text-15",32:"size-8 text-13",28:"size-7 text-13",24:"size-6 text-13",20:"size-5 text-11",16:"size-4 text-11"},accountSize:{80:"size-20 text-[36px]",64:"size-16 text-[32px]",56:"size-14 text-[28px]",48:"size-12 text-[24px]",32:"size-8 text-15",28:"size-7 text-[12px]",24:"size-6 text-[12px]",20:"size-5 text-[12px]",16:"size-4 text-[12px]"},rounded:{full:"rounded-full",80:"rounded-16",48:"rounded-12",32:"rounded-10",28:"rounded-8",24:"rounded-8",20:"rounded-6",16:"rounded-6"},padding:{80:"p-1",64:"p-0.5",56:"p-0.5",48:"p-0.5",32:"p-0.5",28:"p-0",24:"p-0",20:"p-0",16:"p-0"},background:{0:"bg-customisation-50",5:"bg-customisation-50/5",10:"bg-customisation-50/10",20:"bg-customisation-50/20",30:"bg-customisation-50/30",40:"bg-customisation-50/40"}},defaultVariants:{background:"0"}}),Z=(0,K.Fj)({base:["inline-flex w-fit cursor-default items-center","font-medium text-neutral-100 dark:text-white-100","bg-neutral-10 blur:bg-neutral-80/5 dark:bg-neutral-90 blur:dark:bg-white-5"],variants:{size:{32:"h-8 gap-2 px-3 text-15","24+":"h-6 gap-1 px-2 text-15",24:"h-6 gap-1 px-2 text-13",20:"h-5 gap-1 px-1.5 text-13"},selected:{true:"border border-customisation-50"},rounded:{8:"rounded-8",full:"rounded-full"}},defaultVariants:{rounded:"full"}}),W=(0,K.Fj)({base:"shrink-0 [&>*]:size-full",variants:{size:{32:"size-7","24+":"size-5",24:"size-5",20:"size-4"},offset:{32:"-ml-2.5","24+":"-ml-1.5",24:"-ml-1.5",20:"-ml-1"},rounded:{6:"overflow-hidden rounded-6",true:"overflow-hidden rounded-full"}}}),G=(0,r.forwardRef)((e,t)=>{let{size:a="24",...l}=e;return(0,J.YW)(e).with({type:"label"},e=>{let{children:n}=e;return(0,s.jsx)("div",{...l,ref:t,className:Z({size:a}),children:(0,s.jsx)("span",{children:n})})}).with({type:"community"},e=>{let{icon:n,label:i}=e;return(0,s.jsxs)("div",{...l,ref:t,className:Z({size:a}),children:[(0,s.jsx)("span",{className:W({size:a,rounded:!0,offset:a}),children:(0,r.cloneElement)(n)}),(0,s.jsx)("span",{children:i})]})}).with({type:"token"},e=>{let{icon:n,label:i}=e;return(0,s.jsxs)("div",{...l,ref:t,className:Z({size:a}),children:[(0,s.jsx)("span",{className:W({size:a,rounded:!0,offset:a}),children:(0,r.cloneElement)(n)}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:i})]})}).with({type:"network"},e=>{let{icon:n,label:i}=e;return(0,s.jsxs)("div",{...l,ref:t,className:Z({size:a}),children:[(0,s.jsx)("span",{className:W({size:a,rounded:!0,offset:a}),children:(0,r.cloneElement)(n)}),(0,s.jsx)("span",{children:i})]})}).with({type:"account"},e=>{let{label:n,emoji:r}=e;return(0,s.jsxs)("div",{...l,ref:t,className:Z({size:a,rounded:"8"}),children:[(0,s.jsx)("span",{className:W({size:a,rounded:"6",offset:a}),children:(0,s.jsx)(H,{type:"account",size:(0,J.YW)(a).with("32",()=>"28").otherwise(()=>"20"),name:n,emoji:r})}),(0,s.jsx)("span",{children:n})]})}).with({type:"icon"},e=>{let{icon:n,label:i}=e;return(0,s.jsxs)("div",{...l,ref:t,className:Z({size:a}),children:[(0,s.jsx)("span",{className:(0,K.cx)(W({size:a,className:"text-neutral-50"})),children:(0,r.cloneElement)(n)}),(0,s.jsx)("span",{children:i})]})}).exhaustive()});var Q=a(63207),ee=a(42071),et=a(3896),ea=a(1288),es=a(87579),el=a(86436);function en(e){let{sliderConfig:t,value:a,onChange:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-4 px-8 py-4",children:[(0,s.jsx)("div",{className:"flex flex-col items-center justify-center px-0 pb-1 pt-0",children:(0,s.jsx)("input",{type:"range",min:t.minDays,max:t.maxDays,step:"any",value:a,onChange:e=>{l(parseFloat(e.target.value))},className:"h-1 w-full cursor-pointer appearance-none rounded-full bg-neutral-10 [&::-moz-range-thumb]:size-5 [&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:bg-purple [&::-webkit-slider-thumb]:size-5 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple"})}),(0,s.jsxs)("div",{className:"flex items-start justify-between text-13 font-medium text-neutral-50",children:[(0,s.jsx)("span",{children:t.minLabel}),(0,s.jsx)("span",{children:t.maxLabel})]})]})}let er=()=>ea.Ik({years:ea.Yj(),days:ea.Yj()});function ei(e){let t=(0,l.c)(),a=(0,ee.Ym)(),{initialYears:n,initialDays:i,infoMessage:d=t("stake.lock_info_message"),errorMessage:c,onValidate:o,onSubmit:u,onClose:m,actions:h,currentLockUntil:p}=e,[f,j]=h,{watch:b,setValue:v,handleSubmit:g}=(0,et.mN)({resolver:(0,B.u)(er()),defaultValues:{years:n||P.INITIAL_YEARS,days:i||P.INITIAL_DAYS}}),{data:w}=function(){let e=(0,N.U)(),t=(0,l.c)();return(0,es.I)({queryKey:["slider-config"],queryFn:async()=>{try{let a=await (0,el.J)(e,{address:y.Sj.address,abi:y.Sj.abi,functionName:"MIN_LOCKUP_PERIOD"}),s=await (0,el.J)(e,{address:y.Sj.address,abi:y.Sj.abi,functionName:"MAX_LOCKUP_PERIOD"});if("bigint"!=typeof a||"bigint"!=typeof s)throw Error(t("errors.invalid_lockup_period_values"));if(a>=s)throw Error(t("errors.min_lockup_greater_than_max"));return{min:Number(a),max:Number(s)}}catch(e){throw Error(t("errors.failed_fetch_slider_config",{error:e instanceof Error?e.message:"Unknown error"}))}},staleTime:y.WS.SLIDER_STALE_TIME,gcTime:y.WS.SLIDER_CACHE_TIME})}(),_=(0,r.useMemo)(()=>{let e=(null==w?void 0:w.min)||7776e3,a=(null==w?void 0:w.max)||126144e3,s=Math.round(e/U),l=Math.round(a/U),n=s/365,r=l/365;return{minLabel:n<1?t("vault.days_label",{count:s}):t("vault.years_label",{count:n.toFixed(1)}),maxLabel:r<1?t("vault.days_label",{count:l}):t("vault.years_label",{count:Math.round(r)}),minDays:s,maxDays:l,initialPosition:50}},[w,t]),k=b("years"),E=b("days"),C=365*parseInt(n||P.INITIAL_YEARS)+parseInt(i||P.INITIAL_DAYS),[S,F]=(0,r.useState)(C),I=e=>{let t=new Date(1e3*(Math.floor(Date.now()/1e3)+e*U)),s=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"ko"===a?"".concat(s,"-").concat(l,"-").concat(n):"".concat(n,"/").concat(l,"/").concat(s)},z=(0,r.useMemo)(()=>I(parseInt(E||i||P.INITIAL_DAYS)),[E,i]);(0,r.useEffect)(()=>{let e=parseInt(E||P.INITIAL_DAYS);isNaN(e)||e===S||F(e)},[E,S]);let R=async e=>{let t,a=BigInt(parseInt(e.days||P.INITIAL_DAYS)*U);if(p&&p>0n){let e=BigInt(Math.floor(Date.now()/1e3));(t=a-(p>e?p-e:0n))<0n&&(t=0n)}else t=a;m(),u(t)},A=(()=>{let e=parseFloat(k||P.INITIAL_YEARS),a=parseInt(E||P.INITIAL_DAYS);if(a>0&&a<_.minDays)return t("vault.min_lock_time",{time:_.minLabel});if(a>_.maxDays)return t("vault.max_lock_time",{time:_.maxLabel});let s=_.minDays/365;return e>0&&e<s?t("vault.min_lock_time",{time:_.minLabel}):e>_.maxDays/365?t("vault.max_lock_time",{time:_.maxLabel}):null})(),D=o?o(k,E):null,M=c||D||A,L=!!M;return(0,s.jsxs)("form",{onSubmit:g(R),children:[(0,s.jsx)(en,{sliderConfig:_,value:S,onChange:e=>{F(e),v("years",(e/365).toFixed(2)),v("days",Math.round(e).toString())}}),(0,s.jsx)("div",{className:"flex items-center justify-center gap-[2px] px-8 pb-2 pt-4",children:(0,s.jsxs)("div",{className:"flex shrink-0 grow basis-0 gap-2",children:[(0,s.jsx)(q.Input,{label:t("vault.years"),value:k,onChange:e=>{v("years",e);let t=parseFloat(e||"0");if(!isNaN(t)){let e=Math.round(365*t),a=Math.max(_.minDays,Math.min(e,_.maxDays));F(a),v("days",a.toString())}},size:"40",className:L?"border-danger-50/40":""}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center px-0 pb-0 pt-[23px]",children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:t("vault.or")})}),(0,s.jsx)(q.Input,{label:t("vault.days"),value:E,onChange:e=>{v("days",e);let t=parseInt(e||P.INITIAL_DAYS);if(!isNaN(t)){let e=Math.max(_.minDays,Math.min(t,_.maxDays));F(e),v("years",(e/365).toFixed(2))}},size:"40",className:L?"border-danger-50/40":""})]})}),L&&(0,s.jsx)("div",{className:"flex flex-col gap-2 px-8 py-0",style:{opacity:+!!L},children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"flex items-center justify-center gap-[10px] self-stretch px-0 py-px",children:(0,s.jsx)("div",{className:"relative overflow-hidden",children:(0,s.jsx)(T.vd5,{})})}),(0,s.jsx)("div",{className:"flex shrink-0 grow basis-0 flex-col justify-center text-13 font-medium text-danger-50",children:(0,s.jsx)("span",{children:M})})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-6 px-8 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex flex-col justify-center text-15 text-neutral-100",children:(0,s.jsxs)("span",{children:[t("vault.boost_label"),":"]})}),(0,s.jsx)(G,{type:"label",size:"32",children:"x2.5"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex flex-col justify-center text-15 text-neutral-100",children:(0,s.jsxs)("span",{children:[t("vault.unlock_label"),":"]})}),(0,s.jsx)(G,{type:"label",size:"32",children:z})]})]}),(0,s.jsx)("div",{className:"flex flex-col gap-2 px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-2 rounded-12 border border-customisation-blue-50/10 bg-customisation-blue-50/5 px-4 py-[11px]",children:[(0,s.jsx)("div",{className:"flex items-start justify-center gap-[10px] self-stretch px-0 py-px",children:(0,s.jsx)("div",{className:"relative size-4 overflow-hidden",children:(0,s.jsx)(Q.mo,{})})}),(0,s.jsx)("div",{className:"flex shrink-0 grow basis-0 flex-col justify-center text-13 text-neutral-100",children:(0,s.jsx)("span",{children:d})})]})}),(0,s.jsx)("div",{className:"flex w-full flex-col items-start bg-[rgba(255,255,255,0.7)] backdrop-blur-[20px]",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-center gap-3 px-4 pb-4 pt-6",children:[(0,s.jsx)(x.$n,{size:"40",variant:"outline",type:"button",onClick:m,"aria-label":t("vault.close_aria"),className:"flex-1 justify-center",children:f.label}),(0,s.jsx)(x.$n,{size:"40",variant:"primary",type:"submit",className:"flex-1 justify-center",disabled:j.disabled||L,children:j.label})]})})]})}function ed(e){let{open:t,onOpenChange:a,onClose:n,children:r,title:i,vaultAddress:d,description:c,infoMessage:o,errorMessage:u,onValidate:x,actions:m}=e,{mutate:h}=function(e){let{address:t}=(0,f.F)(),{writeContractAsync:a}=(0,g.x)(),s=(0,N.U)(),{send:n,reset:r}=(0,k.c)(),{refetch:i}=(0,_.E)(),d=(0,b.useToast)(),c=(0,l.c)(),{data:o}=(0,S.Q)({abi:M.re,address:e,functionName:"lockUntil"});return(0,v.n)({mutationKey:["lock-vault",e,t],mutationFn:async l=>{let{lockPeriodInSeconds:u}=l;if(!t)throw Error(c("errors.wallet_not_connected"));if(u<=y.n5)throw Error(c("errors.lock_period_greater_than_zero"));n({type:"START_LOCK"});try{let l=await a({account:t,address:e,abi:M.re,functionName:"lock",args:[u]});n({type:"SIGN"});let{status:x}=await (0,w.n)(s,{hash:l,confirmations:y.bI});if("reverted"===x)throw n({type:"REJECT"}),Error(c("errors.transaction_reverted"));let m=o&&o>y.n5;return d.positive(L(e,!!m,c)),r(),await i(),l}catch(e){throw console.error("Failed to lock vault:",e),n({type:"REJECT"}),e}}})}(d),{data:p}=(0,S.Q)({abi:M.re,address:d,functionName:"lockUntil"}),j=BigInt(Math.floor(Date.now()/1e3)),E=p&&p>j,C=E?Math.ceil((Number(p)-Math.floor(Date.now()/1e3))/86400):void 0,F=C?(C/365).toFixed(2):void 0,I=E?String(C):P.INITIAL_DAYS,z=E?F:P.INITIAL_YEARS;return(0,s.jsx)(O.j,{open:t,onOpenChange:a,onClose:n,title:i,description:c,trigger:r,children:(0,s.jsx)(ei,{initialYears:z,initialDays:I,infoMessage:o,errorMessage:u,onValidate:x,onSubmit:e=>{h({lockPeriodInSeconds:e})},onClose:n,actions:m,currentLockUntil:p})})}var ec=a(10278),eo=a(73232),eu=a(34490);let ex=(e,t)=>ea.Ik({amount:ea.Yj().min(1,t("vault.amount_required")).refine(e=>{let t=Number(e);return!isNaN(t)&&t>0},{message:t("vault.amount_greater_than_zero")}).refine(t=>{let a=Number(t);return!isNaN(a)&&a<=e},{message:t("vault.amount_exceeds_max",{max:e})})});function em(e){let{onClose:t,vaultAddress:a,open:n,onOpenChange:i,children:d}=e,c=(0,l.c)(),{address:o}=(0,f.F)(),{mutate:u,isPending:m}=function(){let{address:e}=(0,f.F)(),{writeContractAsync:t}=(0,g.x)(),a=(0,N.U)(),{send:s,reset:n}=(0,k.c)(),{refetch:r}=(0,_.E)(),{refetch:i}=(0,eu.C)(),d=(0,l.c)();return(0,v.n)({mutationKey:["vault-unstake",e],mutationFn:async l=>{let{amountWei:c,vaultAddress:o}=l;if(!e)throw Error(d("errors.wallet_not_connected"));if(c<=y.RL)throw Error(d("errors.amount_greater_than_zero"));s({type:"START_UNSTAKING",amount:(0,R.J)(c,y.YR.decimals)});try{let l=await t({account:e,address:o,abi:M.re,functionName:"unstake",args:[c]});s({type:"SIGN"});let{status:u}=await (0,w.n)(a,{hash:l,confirmations:y.bI});if("reverted"===u)throw s({type:"REJECT"}),Error(d("errors.transaction_reverted"));await Promise.all([r(),i()]),n()}catch(e){throw s({type:"REJECT"}),e}}})}(),{reset:h}=(0,k.c)(),{data:p}=(0,S.Q)({address:a,abi:M.re,functionName:"amountStaked",query:{enabled:n&&!!a,refetchOnMount:!0,refetchOnWindowFocus:!0,staleTime:0}}),j=p?Number((0,R.J)(p,y.YR.decimals)):0,b=(0,et.mN)({resolver:(0,B.u)(ex(j,c)),mode:"onChange",defaultValues:{amount:""}}),E=b.watch("amount"),C=!!b.formState.errors.amount;(0,r.useEffect)(()=>{E&&b.trigger("amount")},[j,E,b]);let F=b.handleSubmit(e=>{try{let s=(0,ec.X)(e.amount,y.YR.decimals);u({amountWei:s,vaultAddress:a}),b.reset(),t()}catch(e){console.error("Failed to parse amount:",e)}});return(0,s.jsx)(O.j,{open:n,onOpenChange:i,onClose:t,title:c("stake.unstake_funds"),description:c("stake.unstake_description"),trigger:d,children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2 px-4 pb-0",children:[(0,s.jsx)("p",{className:"text-13 font-medium text-neutral-50",children:c("stake.amount")}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"rounded-16 border border-neutral-20 px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("input",{id:"unstake-amount",type:"text",inputMode:"decimal",...b.register("amount"),onChange:e=>{let t=e.target.value;t&&(""===t||/^\d*\.?\d*$/.test(t)||0)&&b.setValue("amount",t,{shouldValidate:!0})},placeholder:"0",className:"h-[38px] w-full border-none bg-transparent text-27 font-semibold outline-none placeholder:text-neutral-40 ".concat(C?"text-danger-50":"text-neutral-100")}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(eo.DX,{}),(0,s.jsx)("span",{className:"text-19 font-semibold text-neutral-80",children:"STT"})]})]}),(0,s.jsx)("div",{className:"-mx-4 my-3 h-px w-[calc(100%+32px)] bg-neutral-10"}),(0,s.jsx)("div",{className:"flex justify-end border-neutral-10 text-13 font-500 text-neutral-50",children:(0,s.jsx)("button",{type:"button",onClick:()=>{b.setValue("amount",j.toString(),{shouldValidate:!0})},className:"uppercase ".concat(C?"text-danger-50":"text-neutral-100"),children:"".concat(c("vault.max")," ").concat((0,A.ht)(null!=j?j:0,{includeSymbol:!0}))})})]})})]}),o&&(0,s.jsxs)("div",{className:"flex w-full flex-col items-start gap-1 px-4 py-0",children:[(0,s.jsx)("p",{className:"text-13 font-medium text-neutral-50",children:c("stake.unstake_to")}),(0,s.jsx)("div",{className:"relative w-full rounded-12 border border-neutral-10 bg-white-100 px-[12px] py-[9px] opacity-[40%]",children:(0,s.jsx)("p",{className:"text-15 text-neutral-100",children:o})})]}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-center gap-3 px-4 pb-4 pt-6",children:[(0,s.jsx)(x.$n,{size:"40",variant:"outline",type:"button",onClick:()=>{b.reset(),h(),t()},className:"flex-1 justify-center",disabled:m,children:c("common.cancel")}),E&&Number(E)>0&&(0,s.jsx)(x.$n,{size:"40",variant:"primary",onClick:F,className:"flex-1 justify-center",disabled:!b.formState.isValid||m,children:c(m?"stake.unstaking":"stake.unstake")})]})]})})}var eh=a(99602),ep=a(34300);function ef(e){let t=(0,l.c)(),a=(0,b.useToast)(),{onClose:n,vaultAddress:i,amountWei:d,open:c,onOpenChange:u,children:m}=e,{address:h}=(0,f.F)(),{mutate:p}=function(){let{address:e}=(0,f.F)(),{writeContractAsync:t}=(0,g.x)(),a=(0,N.U)(),s=(0,ep.jE)(),{send:n,reset:r}=(0,k.c)(),i=(0,l.c)();return(0,v.n)({mutationKey:["vault-emergency-exit",e],mutationFn:async l=>{let{amountWei:d,vaultAddress:c,onSigned:o}=l;if(!e)throw Error(i("errors.wallet_not_connected"));n({type:"START_WITHDRAW",amount:(0,R.J)(d,y.YR.decimals)}),null==o||o();try{let l=await t({account:e,address:c,abi:M.re,functionName:"emergencyExit",args:[e]}),{status:d}=await (0,w.n)(a,{hash:l,confirmations:1});if("reverted"===d)throw n({type:"REJECT"}),Error(i("errors.transaction_reverted"));await s.invalidateQueries({queryKey:["staking-vaults"]}),await s.invalidateQueries({queryKey:["multiplier-points-balance"]}),r()}catch(e){throw n({type:"REJECT"}),e}}})}(),j=(0,r.useCallback)(()=>{if(!h)return void console.error("No address found - wallet not connected");try{p({amountWei:d,vaultAddress:i,onSigned:()=>{n(),a.positive(t("emergency.emergency_exit_successful"))}})}catch(e){a.negative(t("emergency.error_calling_emergency",{error:e instanceof Error?e.message:"Unknown error"}))}},[h,d,n,i,p,a,t]);return(0,s.jsxs)(O.j,{open:c,onOpenChange:u,onClose:n,title:t("emergency.emergency_withdrawal"),description:t("emergency.emergency_description"),trigger:m,children:[(0,s.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-1 p-4",children:(0,s.jsx)("div",{className:"flex w-full items-start gap-[2px]",children:(0,s.jsxs)("div",{className:"flex shrink-0 grow basis-0 flex-col items-start gap-2",children:[(0,s.jsx)("div",{className:"flex w-full items-start",children:(0,s.jsx)("p",{className:"shrink-0 grow basis-0 text-13 font-medium text-neutral-50",children:t("emergency.withdraw_to")})}),(0,s.jsx)("div",{className:"w-full rounded-12 border border-neutral-10 bg-white-100 opacity-[0.4]",children:(0,s.jsx)("div",{className:"flex w-full items-center gap-2 overflow-hidden rounded-[inherit] py-[9px] pl-4 pr-3",children:(0,s.jsx)("p",{className:"shrink-0 grow basis-0 break-words text-15 text-neutral-100",children:h})})})]})})}),(0,s.jsx)("div",{className:"flex w-full flex-col items-start gap-2 p-4",children:(0,s.jsx)("div",{className:"flex w-full flex-col items-start gap-2 rounded-12 border border-customisation-blue-50/10 bg-customisation-blue-50/5 px-4 pb-3 pt-[10px]",children:(0,s.jsxs)("div",{className:"flex w-full items-start gap-2",children:[(0,s.jsx)("div",{className:"flex items-start justify-center gap-[10px] self-stretch px-0 pb-0 pt-[3px]",children:(0,s.jsx)("div",{className:"relative size-3 overflow-hidden",children:(0,s.jsx)(o,{})})}),(0,s.jsxs)("div",{className:"flex shrink-0 grow basis-0 flex-col items-start gap-2",children:[(0,s.jsx)("div",{className:"flex w-full flex-col justify-center text-13 text-neutral-100",children:(0,s.jsx)("p",{children:t("emergency.funds_sent_to_wallet")})}),(0,s.jsx)(x.$n,{variant:"outline",size:"24",children:t("common.learn_more")})]})]})})}),(0,s.jsx)("div",{className:"flex w-full flex-col items-start",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-center gap-3 px-4 pb-4 pt-6",children:[(0,s.jsx)(eh.bm,{asChild:!0,children:(0,s.jsx)(x.$n,{size:"40",variant:"outline",onClick:n,className:"flex-1 justify-center",children:t("common.cancel")})}),(0,s.jsx)(x.$n,{size:"40",variant:"primary",type:"button",onClick:()=>j(),className:"flex-1 justify-center",children:t("emergency.withdraw_funds")})]})})]})}let ej=(e,t)=>e.reduce((e,a)=>{var s,l;return e+(t?(null==(s=a.data)?void 0:s.depositedBalance)||0n:(null==(l=a.data)?void 0:l.stakedBalance)||0n)},BigInt(0)),eb=e=>e.reduce((e,t)=>{var a;return e+((null==(a=t.data)?void 0:a.rewardsAccrued)||0n)},BigInt(0)),ev=()=>BigInt(Math.floor(Date.now()/1e3)),eg=e=>(t,a)=>parseInt(a||"0")>1460?e("stake.max_lock_time"):null,eN=(e,t)=>0x6300b5ea===e?"https://sepoliascan.status.network/address/".concat(t):"https://etherscan.io/address/".concat(t),ew=e=>[{label:e("common.cancel")},{label:e("stake.extend_lock")}],ey=e=>[{label:e("stake.dont_lock")},{label:e("stake.lock")}],e_=e=>e("stake.lock_info_message"),ek=e=>{let{vaults:t=[],openModalVaultId:a,setOpenModalVaultId:l,emergencyModeEnabled:n,isConnected:r,openDropdownId:i,setOpenDropdownId:d,chainId:o,t:m}=e,p=ej(t,!!n),f=eb(t),j=ev(),b=(0,h.FB)(),v=eg(m),g=ew(m),N=ey(m),w=e_(m);return[b.accessor("address",{id:"vault",header:m("stake.vault"),cell:e=>{let{row:t}=e;return(0,s.jsxs)("span",{className:"whitespace-pre text-13 font-medium text-neutral-100",children:["#",Number(t.index)+1]})},footer:()=>(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:m("stake.total")}),meta:{headerClassName:"text-left",cellClassName:"text-left"}}),b.accessor("address",{header:m("stake.address"),cell:e=>{let{row:t}=e;return(0,s.jsx)("span",{className:"whitespace-pre text-13 font-medium text-neutral-100",children:E(t.original.address)})},meta:{headerClassName:"text-left",cellClassName:"text-left"}}),b.accessor("data.stakedBalance",{header:n?m("stake.vault_balance"):m("stake.staked"),cell:e=>{var t,a;let{row:l}=e,r=n?null==(t=l.original.data)?void 0:t.depositedBalance:null==(a=l.original.data)?void 0:a.stakedBalance;return(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-100",children:(0,A.ht)(r||0n,{includeSymbol:!0})})})},footer:()=>(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-100",children:(0,A.ht)(p,{includeSymbol:!0})}),meta:{headerClassName:"text-left",cellClassName:"text-left"}}),b.accessor("data.lockUntil",{header:m("stake.unlocks_in"),cell:e=>{var t,a;let{row:l}=e,n=D(null==(t=l.original.data)?void 0:t.lockUntil)?function(e){if(!e)return null;let t=Math.floor(Date.now()/y.ST.MILLISECONDS_PER_SECOND);return Math.ceil((Number(e)-t)/y.ST.SECONDS_PER_DAY)}(null==(a=l.original.data)?void 0:a.lockUntil):null;return n?(0,s.jsx)("div",{className:"flex items-center gap-0.5",children:(0,s.jsxs)("span",{className:"text-13 font-medium text-neutral-100",children:[n,(0,s.jsx)("span",{className:"ml-0.5 text-neutral-50",children:"d"})]})}):null},meta:{headerClassName:"text-left",cellClassName:"text-left"}}),b.accessor("data.maxMP",{header:m("stake.boost"),cell:e=>{var t,a,l;let{row:n}=e,r=(null==(t=n.original.data)?void 0:t.stakedBalance)||0n,i=(null==(a=n.original.data)?void 0:a.maxMP)||0n,d=(null==(l=n.original.data)?void 0:l.mpAccrued)||0n,c=r>0n&&i>d?(i-d)/r:void 0,o=r>0n?Number((0,R.J)(d,y.YR.decimals))/Number((0,R.J)(r,y.YR.decimals))+1:1;return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-13 font-medium text-neutral-100",children:["x",o.toFixed(2)]}),c&&(0,s.jsxs)("span",{className:"text-13 font-medium text-purple",children:["x",(0,A.lO)((0,R.J)(c,y.YR.decimals))," ",m("stake.if_locked")]})]})},meta:{headerClassName:"text-left",cellClassName:"text-left"}}),b.accessor("data.rewardsAccrued",{header:m("karma.title"),cell:e=>{var t;let{row:a}=e,l=Number(null==(t=a.original.data)?void 0:t.rewardsAccrued)/1e18;return(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsxs)("span",{className:"text-13 font-medium text-neutral-100",children:[(0,A.lO)(l),(0,s.jsx)("span",{className:"ml-0.5 text-neutral-50",children:"KARMA"})]})})},footer:()=>(0,s.jsxs)("span",{className:"text-13 font-medium text-neutral-100",children:[(0,A.lO)(f),(0,s.jsx)("span",{className:"ml-0.5 text-neutral-50",children:"KARMA"})]}),meta:{headerClassName:"text-left",cellClassName:"text-left"}}),b.accessor("data.lockUntil",{id:"state",header:m("stake.state"),cell:e=>{var t;let{row:a}=e,l=D(null==(t=a.original.data)?void 0:t.lockUntil);return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[l?(0,s.jsx)(T.c2S,{}):(0,s.jsx)(T.bjT,{className:"text-purple"}),(0,s.jsx)("span",{className:"text-13 font-medium capitalize text-neutral-100",children:l?m("stake.locked"):m("stake.open")})]})},meta:{headerClassName:"text-left",cellClassName:"text-left"}}),b.display({id:"actions",header:m("stake.actions"),cell:e=>{var t,h,p,f;let{row:b}=e,_="withdraw-".concat(b.original.address),k="lock-".concat(b.original.address),E="unstake-".concat(b.original.address),C="dropdown-".concat(b.original.address),S=a===k,F=null!=(h=b.original)&&null!=(t=h.data)&&!!t.lockUntil&&b.original.data.lockUntil>j;return(0,s.jsxs)("div",{className:"flex items-end justify-end gap-2 lg:gap-4",children:[n?(0,s.jsx)(ef,{open:a===_,onOpenChange:e=>l(e?_:null),onClose:()=>l(null),vaultAddress:b.original.address,amountWei:(null==(p=b.original.data)?void 0:p.depositedBalance)||0n,children:(0,s.jsx)(x.$n,{variant:"danger",size:"24",iconBefore:(0,s.jsx)(c,{}),disabled:!(null==(f=b.original.data)?void 0:f.depositedBalance)||0n===b.original.data.depositedBalance,children:"Withdraw funds"})}):(0,s.jsx)(s.Fragment,{children:F?(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(ed,{open:S,onOpenChange:e=>l(e?k:null),vaultAddress:b.original.address,title:m("stake.extend_lock_title"),initialYears:y.TG.INITIAL_YEARS,initialDays:y.TG.INITIAL_DAYS,description:m("stake.extend_lock_description"),actions:[...g],onClose:()=>l(null),infoMessage:w,children:(0,s.jsxs)(x.$n,{variant:"primary",size:"24",disabled:!r,children:[(0,s.jsx)(u,{className:"shrink-0"}),(0,s.jsx)("span",{className:"hidden whitespace-nowrap xl:inline",children:m("stake.extend_lock_time")}),(0,s.jsx)("span",{className:"whitespace-nowrap xl:hidden",children:m("stake.extend")})]})})}):(0,s.jsx)(ed,{open:S,onOpenChange:e=>l(e?k:null),vaultAddress:b.original.address,title:m("stake.do_you_want_to_lock"),description:m("stake.lock_description"),actions:[...N],onClose:()=>l(null),infoMessage:w,onValidate:v,children:(0,s.jsxs)(x.$n,{variant:"primary",size:"24",disabled:!r,children:[(0,s.jsx)(T.c2S,{fill:"white",className:"shrink-0"}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:m("stake.lock")})]})})}),(0,s.jsxs)(I.bL,{onOpenChange:e=>d(e?C:null),open:i===C,children:[(0,s.jsx)(z.IconButton,{icon:(0,s.jsx)(T.mE1,{}),variant:"outline"}),(0,s.jsxs)(I.UC,{collisionPadding:12,sideOffset:10,className:"w-[256px]",style:{zIndex:100},children:[!F&&(0,s.jsx)(I.q7,{label:m("stake.unstake"),onSelect:()=>{l(E)}}),(0,s.jsx)(I.q7,{label:m("stake.open_in_explorer"),external:!0,onSelect:()=>{window.open(eN(o,b.original.address),"_blank")}})]})]}),(0,s.jsx)(em,{open:a===E,onOpenChange:e=>l(e?E:null),onClose:()=>l(null),vaultAddress:b.original.address})]})},meta:{headerClassName:"text-right",cellClassName:"text-right"}})]};function eE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text-left";return(null==e?void 0:e.cellClassName)||t}function eC(e){let{table:t}=e;return(0,s.jsx)("thead",{className:"h-10 border-b border-solid border-neutral-10 bg-neutral-5",children:t.getHeaderGroups().map(e=>(0,s.jsx)("tr",{children:e.headers.map(e=>(0,s.jsx)("th",{className:"box-border px-3 ".concat(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text-left";return(null==e?void 0:e.headerClassName)||t}(e.column.columnDef.meta)),children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:(0,m.Kv)(e.column.columnDef.header,e.getContext())})},e.id))},e.id))})}function eS(e){let{table:t}=e;return(0,s.jsx)("tbody",{className:"divide-y divide-neutral-10",children:t.getRowModel().rows.map(e=>(0,s.jsx)("tr",{className:"transition-colors hover:bg-neutral-5",children:e.getVisibleCells().map(e=>(0,s.jsx)("td",{className:"box-border px-3 py-[11px] ".concat(eE(e.column.columnDef.meta)),children:(0,m.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})}function eF(e){let{table:t}=e;return(0,s.jsx)("tfoot",{className:"border-t border-solid border-neutral-10 bg-neutral-5",children:t.getFooterGroups().map(e=>(0,s.jsx)("tr",{children:e.headers.map(e=>(0,s.jsx)("td",{className:"box-border px-3 py-[7px] ".concat(eE(e.column.columnDef.meta)),children:e.column.columnDef.footer?(0,m.Kv)(e.column.columnDef.footer,e.getContext()):null},e.id))},e.id))})}function eI(){let e=(0,l.c)();return(0,s.jsx)("div",{className:"max-h-[600px] overflow-auto",children:(0,s.jsx)("div",{className:"min-w-[800px]",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{className:"h-10 border-b border-solid border-neutral-10 bg-neutral-5",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"box-border px-3 text-left",children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:e("stake.vault_name")})}),(0,s.jsx)("th",{className:"box-border px-3 text-left",children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:e("stake.staked")})}),(0,s.jsx)("th",{className:"box-border px-3 text-left",children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:e("stake.boost")})}),(0,s.jsx)("th",{className:"box-border px-3 text-left",children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:e("stake.multiplier_points")})}),(0,s.jsx)("th",{className:"box-border px-3 text-right",children:(0,s.jsx)("span",{className:"text-13 font-medium text-neutral-50",children:e("stake.actions")})})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-neutral-10",children:Array.from({length:3}).map((e,t)=>(0,s.jsxs)("tr",{className:"h-[60px]",children:[(0,s.jsx)("td",{className:"box-border px-3 py-2.5",children:(0,s.jsx)(i.E,{height:20,width:120,className:"rounded-6"})}),(0,s.jsx)("td",{className:"box-border px-3 py-2.5",children:(0,s.jsx)(i.E,{height:20,width:100,className:"rounded-6"})}),(0,s.jsx)("td",{className:"box-border px-3 py-2.5",children:(0,s.jsx)(i.E,{height:20,width:60,className:"rounded-6"})}),(0,s.jsx)("td",{className:"box-border px-3 py-2.5",children:(0,s.jsx)(i.E,{height:20,width:80,className:"rounded-6"})}),(0,s.jsx)("td",{className:"box-border px-3 py-2.5 text-right",children:(0,s.jsx)(i.E,{height:32,width:80,className:"ml-auto rounded-6"})})]},t))})]})})})}function ez(){let e=(0,l.c)(),[t,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),{data:c,isLoading:o}=(0,_.E)(),{isConnected:u}=(0,f.F)(),{isSignedIn:b,isLoading:v}=(0,p.i_)(),g=(0,j.i)(),{mutate:N}=C(),{data:w}=F(),y=(0,r.useCallback)(e=>a(e),[]),k=(0,r.useMemo)(()=>ek({vaults:c,chainId:g,openModalVaultId:t,setOpenModalVaultId:y,emergencyModeEnabled:w,isConnected:u,openDropdownId:n,setOpenDropdownId:i,t:e}),[c,g,t,y,w,u,n,e]),E=(0,m.N4)({data:null!=c?c:[],columns:k,getCoreRowModel:(0,h.HT)()});if(v||!b||c&&0===c.length)return null;let S=o||!c;return(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 lg:justify-between",children:[(0,s.jsx)("h2",{className:"text-19 font-semibold leading-none text-neutral-100",children:e("stake.my_vaults")}),u&&b&&!S&&(0,s.jsxs)(x.$n,{variant:"outline",size:"32",onClick:()=>N(),disabled:!!w,children:[(0,s.jsx)(d,{}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:e("stake.add_vault")})]})]}),(0,s.jsx)("div",{className:"relative mb-4 w-full overflow-hidden rounded-16 border border-solid border-neutral-10 bg-white-100",children:S?(0,s.jsx)(eI,{}):(0,s.jsx)("div",{className:"max-h-[600px] overflow-auto",children:(0,s.jsx)("div",{className:"min-w-[800px]",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)(eC,{table:E}),(0,s.jsx)(eS,{table:E}),(0,s.jsx)(eF,{table:E})]})})})})]})}var eT=a(68259),eR=a(30703),eA=a(2492),eD=a(2065),eM=a(54987);let eL="faucet";function eO(e){var t,a;let s=(0,N.U)(),{address:n}=(0,f.F)(),r=(0,j.i)(),i=(0,l.c)();return(0,es.I)({queryKey:[eL,n,r],queryFn:async()=>{if(!n)throw Error(i("errors.wallet_not_connected"));let[e,t,a]=await (0,eM.I)(s,{contracts:[{chainId:r,address:y.t_.address,abi:y.t_.abi,functionName:"DAILY_LIMIT"},{chainId:r,address:y.t_.address,abi:y.t_.abi,functionName:"accountDailyRequests",args:[n]},{chainId:r,address:y.t_.address,abi:y.t_.abi,functionName:"accountResetTime",args:[n]}]});if("failure"===e.status)throw Error(i("errors.failed_fetch_daily_limit"));if("failure"===t.status)throw Error(i("errors.failed_fetch_account_requests"));if("failure"===a.status)throw Error(i("errors.failed_fetch_reset_time"));let l=e.result,d=t.result,c=a.result,o=Math.floor(Date.now()/1e3),u=c<=o?l:l-d,x=c<=o?0n:d;return{dailyLimit:l,accountDailyRequests:d,accountResetTime:c,hasUsedFaucet:x>0n,actualUsedToday:x,remainingAmount:u,remainingRequests:l>d?l-d:0n,canClaim:u>0n}},enabled:null!=(t=null==e?void 0:e.enabled)?t:!!n,refetchInterval:null!=(a=null==e?void 0:e.refetchInterval)?a:3e4})}let eY=()=>{let e=(0,l.c)();return(0,s.jsxs)("div",{className:"flex flex-col gap-6 rounded-16 border border-neutral-10 bg-white-100 p-6 shadow-2 md:flex-row md:items-center md:justify-between md:gap-8 md:rounded-32 md:py-4 md:pl-4 md:pr-8",children:[(0,s.jsx)("h3",{className:"text-19 font-500 md:hidden",children:e("stake.faucet_title")}),(0,s.jsxs)("div",{className:"flex items-end gap-4 md:items-center md:gap-6",children:[(0,s.jsx)(eR.default,{width:"103",height:"124",src:"/piggy-bank.png",alt:e("stake.piggy_bank_alt"),className:"-ml-2 -mt-4 shrink-0 md:-ml-0 md:-mt-0"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h3",{className:"hidden text-19 font-500 md:block",children:e("stake.faucet_title")}),(0,s.jsxs)("div",{className:"flex flex-col flex-wrap gap-x-14 gap-y-2 lg:flex-row",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 text-13 font-500",children:[(0,s.jsx)("p",{className:"text-neutral-50",children:e("stake.daily_limit")}),(0,s.jsx)(i.E,{height:18,width:80,className:"rounded-6"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 text-13 font-500",children:[(0,s.jsx)("p",{className:"text-neutral-50",children:e("stake.used_today")}),(0,s.jsx)(i.E,{height:18,width:80,className:"rounded-6"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 text-13 font-500",children:[(0,s.jsx)("p",{className:"text-neutral-50",children:e("stake.available")}),(0,s.jsx)(i.E,{height:18,width:80,className:"rounded-6"})]})]})]})]}),(0,s.jsx)(x.$n,{className:"self-end",disabled:!0,children:e("stake.claim_testnet_snt")})]})},eU=()=>{var e,t,a;let n=(0,l.c)(),{data:i,isLoading:d}=eO(),{isSignedIn:c,isLoading:o}=(0,p.i_)(),{mutate:u,isPending:m}=function(){let{address:e}=(0,f.F)(),{writeContractAsync:t}=(0,g.x)(),a=(0,j.i)(),s=(0,N.U)(),n=(0,ep.jE)(),{refetch:r}=eO(),i=(0,l.c)();return(0,v.n)({mutationKey:[eL,"request",e],mutationFn:async a=>{let{amount:l}=a;if(!e)throw Error(i("errors.wallet_not_connected"));let n=await t({account:e,address:y.t_.address,abi:y.t_.abi,functionName:"requestTokens",args:[null!=l?l:0n,e]}),{status:r}=await (0,w.n)(s,{hash:n,confirmations:1});if("reverted"===r)throw Error(i("errors.transaction_reverted"))},onSuccess:()=>{r(),n.invalidateQueries({queryKey:[eL,e,a]})},onError:e=>{console.error("Failed to request tokens:",e)}})}(),{address:h,isConnected:b,isConnecting:_}=(0,f.F)(),{data:k}=F(),{refetch:E}=(0,eA.A)({scopeKey:"balance",address:h,token:y.YR.address,query:{enabled:b}}),C=(0,r.useMemo)(()=>{if(!i)return!1;let e=BigInt(Math.floor(Date.now()/eD.ST.MILLISECONDS_PER_SECOND)),t=i.accountResetTime>e;return i.accountDailyRequests>=i.dailyLimit&&t},[i]);return d||_||o?(0,s.jsx)(eY,{}):(0,s.jsxs)("div",{className:"flex flex-col gap-6 rounded-16 border border-neutral-10 bg-white-100 p-6 shadow-2 md:flex-row md:items-center md:justify-between md:gap-8 md:rounded-32 md:py-4 md:pl-4 md:pr-8",children:[(0,s.jsx)("h3",{className:"text-19 font-500 md:hidden",children:n("stake.faucet_title")}),(0,s.jsxs)("div",{className:"flex items-end gap-4 md:items-center md:gap-6",children:[(0,s.jsx)(eR.default,{width:"103",height:"124",src:"/piggy-bank.png",alt:n("stake.piggy_bank_alt"),className:"-ml-2 -mt-4 shrink-0 md:-ml-0 md:-mt-0"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h3",{className:"hidden text-19 font-500 md:block",children:n("stake.faucet_title")}),(0,s.jsxs)("div",{className:"flex flex-col flex-wrap gap-x-14 gap-y-2 lg:flex-row",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 text-13 font-500",children:[(0,s.jsx)("p",{className:"text-neutral-50",children:n("stake.daily_limit")}),(0,s.jsx)("span",{className:"text-15 font-500",children:(0,A.ht)(null!=(e=null==i?void 0:i.dailyLimit)?e:0,{includeSymbol:!0})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 text-13 font-500",children:[(0,s.jsx)("p",{className:"text-neutral-50",children:n("stake.used_today")}),(0,s.jsx)("span",{className:"text-15 font-500",children:(0,A.ht)(null!=(t=null==i?void 0:i.actualUsedToday)?t:0,{includeSymbol:!0})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 text-13 font-500",children:[(0,s.jsx)("p",{className:"text-neutral-50",children:n("stake.available")}),(0,s.jsx)("span",{className:"text-15 font-500",children:(0,A.ht)(null!=(a=null==i?void 0:i.remainingAmount)?a:0,{includeSymbol:!0})})]})]})]})]}),(0,s.jsx)(x.$n,{className:"w-full shrink-0 justify-center md:w-auto",disabled:!b||C||m||!c||!!k,onClick:()=>{var e;return u({amount:null!=(e=null==i?void 0:i.remainingAmount)?e:BigInt(0)},{onSuccess:()=>{E()}})},children:n(m?"stake.claiming":"stake.claim_testnet_snt")})]})};var eP=a(4271);let eB=e=>{let{open:t,onClose:a,children:n}=e,r=(0,l.c)();return(0,s.jsxs)(eh.bL,{open:t,onOpenChange:e=>{e||a()},children:[(0,s.jsx)(eh.l9,{asChild:!0,children:n}),(0,s.jsxs)(eh.ZL,{children:[(0,s.jsx)(eh.hJ,{className:"fixed inset-0 z-40 bg-neutral-80/60 backdrop-blur-sm"}),(0,s.jsxs)(eh.UC,{className:"fixed left-1/2 top-1/2 z-50 min-h-[432px] w-full max-w-[1112px] -translate-x-1/2 -translate-y-1/2 px-4 focus:outline-none",children:[(0,s.jsx)("div",{"data-background":"blur",className:"absolute right-8 top-4 z-50 size-10",children:(0,s.jsx)(eh.bm,{asChild:!0,children:(0,s.jsx)("button",{"aria-label":r("common.close"),className:"flex size-10 items-center justify-center rounded-12 bg-white-20 p-2 backdrop-blur-2xl hover:bg-white-30",children:(0,s.jsx)(T.USm,{className:"text-white-100"})})})}),(0,s.jsxs)("div",{className:"relative min-h-[inherit] w-full overflow-hidden rounded-40 shadow-3",children:[(0,s.jsx)("div",{className:"absolute inset-0 h-full rounded-40 bg-[url('/modal/bg-gradient.png')] bg-cover bg-center"}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col gap-12 rounded-40 p-10 text-white-100 md:flex-row md:items-end md:justify-between",children:[(0,s.jsxs)("div",{className:"h-full max-w-[575px] space-y-4",children:[(0,s.jsx)(eP.v,{label:r("stake.promo_modal.wallet_connector_tag")}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(eh.hE,{asChild:!0,children:(0,s.jsx)("h2",{className:"text-40 font-bold text-white-100",children:r("stake.promo_modal.connect_to_network_title")})}),(0,s.jsx)(eh.VY,{asChild:!0,children:(0,s.jsx)("p",{className:"max-w-[325px] text-19 font-medium text-white-100",children:r("stake.promo_modal.description")})})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col gap-6 sm:flex-row",children:[(0,s.jsxs)(x.vx,{variant:"white",href:"https://chromewebstore.google.com/detail/a-wallet-connector-by-sta/kahehnbpamjplefhpkhafinaodkkenpg",className:"text-purple",children:[r("stake.promo_modal.install_connector"),(0,s.jsx)(T.XMg,{className:"size-4"})]}),(0,s.jsx)(p.Lw.Custom,{children:e=>{let{show:t,isConnected:a}=e;return(0,s.jsx)(x.$n,{onClick:t,variant:a?"secondary":"primary",children:a?r("stake.promo_modal.connected"):r("stake.connect_wallet")})}})]})]}),(0,s.jsxs)("div",{className:"relative mx-auto h-[398px] w-full max-w-[444px] md:mx-0",children:[(0,s.jsx)(eR.default,{src:"/modal/connector-1.png",alt:r("stake.promo_modal.connector_alt"),width:"265",height:"235",className:"absolute -left-1/4 top-0 translate-x-14 scale-[120%]"}),(0,s.jsx)(eR.default,{src:"/modal/connector-2.png",alt:r("stake.promo_modal.connector_alt"),width:"359",height:"248",className:"absolute bottom-2 right-8 scale-[120%]"}),(0,s.jsx)(eR.default,{src:"/modal/dragon.png",alt:"Dragon",width:"304",height:"211",className:"absolute right-0 top-[-32px]"})]})]})]})]})]})]})};function eq(e,t){var a;let s=(null==(a=e.data)?void 0:a.stakedBalance)?(0,A.ht)(e.data.stakedBalance,{includeSymbol:!0}):"0 STT",l="".concat(e.address.slice(0,6),"...").concat(e.address.slice(-4));return"#".concat(t+1," - ").concat(l,", ").concat(s)}function eK(e){var t;let{vaults:a,value:n,onChange:i,disabled:d=!1,placeholder:c}=e,o=(0,l.c)(),[u,x]=(0,r.useState)(!1),m=null!=c?c:o("stake.add_new_vault"),h=a.find(e=>e.address===n),p=a.findIndex(e=>e.address===n),f=D(null==h||null==(t=h.data)?void 0:t.lockUntil),j=h&&-1!==p?eq(h,p):m,b=a.length>0,v=(0,s.jsxs)("button",{type:"button",disabled:d,className:"flex w-full items-center justify-between rounded-12 border border-neutral-20 bg-white-100 px-3 py-[9px] text-left text-15 text-neutral-100 transition data-[state=open]:border-neutral-30 hover:border-neutral-30 disabled:cursor-not-allowed disabled:opacity-[.4]",children:[(0,s.jsxs)("div",{className:"flex min-w-0 items-center gap-2",children:[h?f?(0,s.jsx)(T.c2S,{className:"size-5 shrink-0 text-purple"}):(0,s.jsx)(T.bjT,{className:"size-5 shrink-0 text-purple"}):(0,s.jsx)(T.ybp,{className:"size-5 shrink-0 text-neutral-100"}),(0,s.jsx)("span",{className:"truncate font-regular",children:j})]}),(0,s.jsx)(T.FAx,{className:"shrink-0 text-neutral-40 transition-transform ".concat(u?"rotate-180":"")})]}),g=(0,s.jsxs)(I.UC,{align:"start",className:"z-50 max-h-[400px] w-[var(--radix-dropdown-menu-trigger-width)] overflow-y-auto",children:[(0,s.jsx)(I.q7,{icon:(0,s.jsx)(T.ybp,{className:"text-neutral-100"}),label:m,selected:!n,onSelect:()=>{i(""),x(!1)}}),b?(0,s.jsx)(s.Fragment,{children:a.map((e,t)=>{var a;let l=D(null==(a=e.data)?void 0:a.lockUntil);return(0,s.jsx)(I.q7,{icon:l?(0,s.jsx)(T.c2S,{className:"text-purple"}):(0,s.jsx)(T.bjT,{className:"text-purple"}),label:eq(e,t),selected:e.address===n,onSelect:()=>{i(e.address),x(!1)}},e.address)})}):null]});return(0,s.jsxs)(I.bL,{open:u,onOpenChange:e=>{d||x(e)},children:[v,g]})}var eJ=a(29296);let eV={CONFIRMATION_BLOCKS:1};var e$=a(6861);let eH=e=>{let{balance:t,amountInUSD:a=0,onMaxClick:n,register:r,isConnected:d,isLoading:c=!1,isDisabled:o=!1,exceedsBalance:u=!1}=e,x=(0,l.c)(),m=(d||c)&&!o?"":"opacity-[40%]";return(0,s.jsxs)("div",{className:"space-y-2 ".concat(m),children:[(0,s.jsx)("label",{htmlFor:"stake-amount",className:"block text-13 font-medium text-neutral-50",children:x("stake.amount_to_stake")}),(0,s.jsxs)("div",{className:"rounded-16 border border-neutral-20 bg-white-100 px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[d?(0,s.jsx)("input",{id:"stake-amount",type:"text",inputMode:"decimal",...r("amount"),placeholder:"0",disabled:o,className:"h-[38px] w-full border-none bg-transparent text-27 font-semibold outline-none placeholder:text-neutral-40 ".concat(u?"text-danger-50":"text-neutral-100")}):(0,s.jsx)("span",{className:"text-27 font-semibold text-neutral-40",children:"0"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(eo.DX,{}),(0,s.jsx)("span",{className:"text-19 font-semibold text-neutral-80",children:"STT"})]})]}),(c||d)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"-mx-4 my-3 h-px w-[calc(100%+32px)] bg-neutral-10"}),(0,s.jsx)("div",{className:"flex items-center justify-between text-13 font-500 text-neutral-50",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.E,{height:18,width:100,className:"rounded-6"}),(0,s.jsx)(i.E,{height:18,width:100,className:"rounded-6"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:(0,A.vv)(a)}),(0,s.jsx)("button",{type:"button",onClick:n,className:"uppercase ".concat(u?"text-danger-50":"text-neutral-100"),children:"".concat(x("vault.max")," ").concat((0,A.ht)(null!=t?t:0,{includeSymbol:!0}))})]})})]})]})]})},eX=e=>[{label:e("stake.dont_lock")},{label:e("stake.lock")}],eZ=()=>{let e=(0,l.c)();return(0,s.jsxs)("div",{className:"flex flex-col gap-4 rounded-16 border border-neutral-10 bg-white-100 p-4 shadow-2 md:rounded-32 md:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"stake-amount",className:"block text-13 font-medium text-neutral-50",children:e("stake.amount_to_stake")}),(0,s.jsxs)("div",{className:"rounded-12 border border-neutral-20 bg-white-100 px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-27 font-semibold text-neutral-40",children:"0"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(eo.DX,{}),(0,s.jsx)("span",{className:"text-19 font-semibold text-neutral-80",children:"STT"})]})]}),(0,s.jsx)("div",{className:"-mx-4 my-3 h-px w-[calc(100%+32px)] bg-neutral-10"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-13 font-500 text-neutral-50",children:[(0,s.jsx)(i.E,{height:18,width:100,className:"rounded-6"}),(0,s.jsx)(i.E,{height:18,width:100,className:"rounded-6"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"vault-select",className:"block text-13 font-medium text-neutral-50",children:e("stake.select_vault")}),(0,s.jsx)("div",{className:"rounded-12 border border-neutral-20 bg-white-100 py-[9px] pl-4 pr-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(T.bjT,{className:"text-neutral-100"}),(0,s.jsx)(i.E,{height:22,width:"100%",className:"flex-1 rounded-6"}),(0,s.jsx)(T.FAx,{className:"text-neutral-40"})]})})]})]}),(0,s.jsx)(x.$n,{disabled:!0,type:"button",className:"w-full justify-center",children:e("stake.stake_stt")})]})},eW=()=>ea.Ik({amount:ea.Yj(),vault:ea.Yj()}),eG=()=>{let e=(0,l.c)(),{mutate:t}=C(),{address:a,isConnected:n,isConnecting:i}=(0,f.F)(),{mutateAsync:d}=function(){let{address:e}=(0,f.F)(),{writeContractAsync:t}=(0,g.x)(),a=(0,N.U)(),{send:s}=(0,k.c)(),n=(0,b.useToast)(),r=(0,l.c)();return(0,v.n)({mutationKey:["approve-token",e],mutationFn:async l=>{let{amount:i,spenderAddress:d}=l;if(!e)throw Error(r("errors.wallet_not_connected"));if(!d||d===eJ.Xd)throw Error(r("errors.invalid_spender_address"));if(!i||0>=parseFloat(i))throw Error(r("errors.amount_greater_than_zero"));let c=(0,ec.X)(i,y.YR.decimals);s({type:"START_INCREASE_ALLOWANCE",amount:i});try{let e=await t({address:y.YR.address,abi:y.YR.abi,functionName:"approve",args:[d,c]});s({type:"SIGN"});let{status:l}=await (0,w.n)(a,{hash:e,confirmations:eV.CONFIRMATION_BLOCKS});if("reverted"===l)throw Error(r("errors.transaction_reverted"));s({type:"COMPLETE",amount:i}),n.positive(r("success.token_allowance_increased"))}catch(e){throw console.error("Failed to approve tokens:",e),s({type:"REJECT"}),e}}})}(),{mutateAsync:c}=function(){let{address:e}=(0,f.F)(),{writeContractAsync:t}=(0,g.x)(),a=(0,N.U)(),{send:s,reset:n}=(0,k.c)(),{refetch:r}=(0,_.E)(),{refetch:i}=(0,eu.C)(),d=(0,l.c)();return(0,v.n)({mutationKey:["vault-stake",e],mutationFn:async l=>{let{amountWei:c,lockPeriod:o,vaultAddress:u}=l;if(!e)throw Error(d("errors.wallet_not_connected"));if(c<=y.RL)throw Error(d("errors.amount_greater_than_zero"));s({type:"START_STAKING",amount:(0,R.J)(c,y.YR.decimals)});try{let l=await t({account:e,address:u,abi:M.re,functionName:"stake",args:[c,o]});s({type:"SIGN"});let{status:x}=await (0,w.n)(a,{hash:l,confirmations:y.bI});if("reverted"===x)throw s({type:"REJECT"}),Error(d("errors.transaction_reverted"));await Promise.all([r(),i()]),n()}catch(e){throw s({type:"REJECT"}),e}}})}(),{isSignedIn:o,isLoading:u,signIn:m}=(0,p.i_)(),{data:h,refetch:j}=(0,_.E)(),{send:E}=(0,k.c)(),{data:S}=(0,e$.R)(),{isInstalled:I}=function(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=()=>{let e=window.ethereum;return(null==e?void 0:e.isStatus)===!0||!!Array.isArray(null==e?void 0:e.providers)&&e.providers.some(e=>!0===e.isStatus)},a=e=>{var a;let{detail:l}=e;(null==l||null==(a=l.info)?void 0:a.rdns)==="app.status"&&(t(!0),s(!1))};if(e()){t(!0),s(!1);return}window.addEventListener("eip6963:announceProvider",a),window.dispatchEvent(new Event("eip6963:requestProvider"));let l=setTimeout(()=>{e()&&t(!0),s(!1)},500);return()=>{window.removeEventListener("eip6963:announceProvider",a),clearTimeout(l)}},[]),{isInstalled:e,isChecking:a}}(),{data:z}=F(),[A,D]=(0,r.useState)(!1),[L,O]=(0,r.useState)(null),Y=eX(e),U=(0,r.useMemo)(()=>n&&!o?"signInRequired":n?"connected":I?"disconnected":"uninstalled",[n,o,I]),{data:P,isLoading:q,refetch:K}=(0,eA.A)({scopeKey:"balance",address:a,token:y.YR.address,query:{enabled:n}}),V=(0,et.mN)({resolver:(0,B.u)(eW()),mode:"onChange",defaultValues:{amount:"",vault:""}}),$=(0,N.U)(),H=(0,et.FH)({control:V.control,name:"amount",defaultValue:""}),X=(0,r.useMemo)(()=>{let e=parseFloat(H||"0");return S&&!isNaN(e)?e*S.price:0},[H,S]),Z=(0,r.useMemo)(()=>{if(!H||!(null==P?void 0:P.value))return!1;try{return(0,ec.X)(H,y.YR.decimals)>P.value}catch(e){return!1}},[H,null==P?void 0:P.value]),W=async(e,t)=>{await c({amountWei:t,lockPeriod:y.fw.DEFAULT_STAKE_LOCK_PERIOD,vaultAddress:e}),V.reset(),await Promise.all([j(),K()]),O(e)},G=async e=>{if(!e.amount||!e.vault||!a)return;let t=e.vault,s=(0,ec.X)(e.amount,y.YR.decimals);try{let l=await (0,el.J)($,{address:y.YR.address,abi:y.YR.abi,functionName:"allowance",args:[a,t]});if(s>l)return void await d({amount:e.amount,spenderAddress:t},{onSuccess:()=>{W(t,s)}});await W(t,s)}catch(e){E({type:"REJECT"}),console.error("Staking failed:",e)}};return i||n&&(q||u)?(0,s.jsx)(eZ,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{onSubmit:V.handleSubmit(G),className:"flex flex-col gap-4 rounded-16 border border-neutral-10 bg-white-100 p-4 shadow-2 md:rounded-32 md:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-4",children:[(0,s.jsx)(eH,{balance:null==P?void 0:P.value,amountInUSD:X,exceedsBalance:Z,onMaxClick:()=>{let e=(null==P?void 0:P.value)?(0,R.J)(P.value,y.YR.decimals):"0";V.setValue("amount",e)},register:V.register,isConnected:"connected"===U,isLoading:q,isDisabled:(null==h?void 0:h.length)===0}),(0,s.jsxs)("div",{className:(0,J.YW)(U).with("connected",()=>"space-y-2").with("signInRequired",()=>"space-y-2 opacity-[40%]").otherwise(()=>"space-y-2 opacity-[40%]"),children:[(0,s.jsx)("label",{htmlFor:"vault-select",className:"block text-13 font-medium text-neutral-50",children:e("stake.select_vault")}),(0,J.YW)(U).with("connected",()=>(0,s.jsx)(eK,{vaults:null!=h?h:[],value:V.watch("vault"),onChange:e=>V.setValue("vault",e),disabled:(null==h?void 0:h.length)===0})).otherwise(()=>(0,s.jsx)("div",{className:"rounded-12 border border-neutral-20 bg-white-100 py-[9px] pl-4 pr-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-15",children:e("stake.add_new_vault")}),(0,s.jsx)(T.FAx,{className:"text-neutral-40"})]})}))]})]}),(0,J.YW)(U).with("uninstalled",()=>(0,s.jsx)(eB,{open:A,onClose:()=>D(!1),children:(0,s.jsx)(x.$n,{className:"w-full justify-center",onClick:()=>D(!0),children:e("stake.connect_wallet")})})).with("disconnected",()=>(0,s.jsx)(p.Lw.Custom,{children:t=>{let{show:a}=t;return(0,s.jsx)(x.$n,{className:"w-full justify-center",onClick:e=>{e.preventDefault(),null==a||a()},children:e("stake.connect_wallet")})}})).with("signInRequired",()=>(0,s.jsx)(x.$n,{className:"w-full justify-center",onClick:e=>{e.preventDefault(),null==m||m()},children:e("stake.sign_in_to_continue")})).with("connected",()=>V.watch("vault")&&V.watch("amount")?(0,s.jsx)(x.$n,{className:"w-full justify-center",type:"submit",disabled:!!z||Z,children:e("stake.stake_stt")}):(0,s.jsx)(x.$n,{className:"w-full justify-center",onClick:()=>t(),disabled:!!z,children:e("stake.create_new_vault")})).exhaustive()]}),L&&(0,s.jsx)(ed,{open:!!L,onOpenChange:e=>{e||O(null)},onClose:()=>O(null),vaultAddress:L,title:e("stake.do_you_want_to_lock"),description:e("stake.lock_description"),actions:[...Y]})]})},eQ=()=>{let e=(0,l.c)();return(0,s.jsxs)("div",{className:"rounded-16 border border-neutral-10 bg-white-100 p-4 shadow-2 md:rounded-32 md:p-8",children:[(0,s.jsx)("div",{className:"mb-2 flex items-start justify-between",children:(0,s.jsx)("p",{className:"text-13 font-500 text-neutral-60",children:e("stake.total_staked")})}),(0,s.jsxs)("div",{className:"mb-4 flex items-end gap-2",children:[(0,s.jsx)(eo.DX,{}),(0,s.jsx)(i.E,{height:32,width:180,className:"rounded-6"})]}),(0,s.jsx)(i.E,{height:18,width:160,className:"rounded-6"})]})},e0=()=>{let e=(0,l.c)(),{isConnecting:t}=(0,f.F)(),{data:a,isLoading:n}=(0,S.Q)({address:y.Sj.address,abi:y.Sj.abi,functionName:"totalStaked"}),{data:r}=F();return r?null:n||t?(0,s.jsx)(eQ,{}):(0,s.jsxs)("div",{className:"rounded-16 border border-neutral-10 bg-white-100 p-4 shadow-2 md:rounded-32 md:p-8",children:[(0,s.jsx)("div",{className:"mb-2 flex items-start justify-between",children:(0,s.jsx)("p",{className:"text-13 font-500 text-neutral-60",children:e("stake.total_staked")})}),(0,s.jsxs)("div",{className:"mb-4 flex items-end gap-2",children:[(0,s.jsx)(eo.DX,{}),(0,s.jsx)("span",{className:"text-27 font-600",children:(0,A.ht)(null!=a?a:0n,{includeSymbol:!0})})]}),(0,s.jsx)("p",{className:"text-13 font-500 text-neutral-40",children:e("stake.next_unlock_in",{days:y.fw.NEXT_UNLOCK_DAYS})})]})};var e1=a(51026),e2=a(86149);let e5=()=>{let e=(0,ee.Ym)(),t=(0,l.c)();return(0,s.jsx)(e2.I,{content:t("stake.weighted_boost_tooltip",{maxBoost:y.j3}),link:"https://docs.status.network".concat("en"===e?"":"/".concat(e),"/tokenomics/snt-staking")})},e4=()=>{let e=(0,l.c)();return(0,s.jsxs)("div",{className:"rounded-16 border border-neutral-10 bg-white-100 p-4 shadow-2 md:rounded-32 md:p-8",children:[(0,s.jsxs)("div",{className:"mb-2 flex items-start justify-between",children:[(0,s.jsx)("p",{className:"text-13 font-500 text-neutral-60",children:e("stake.weighted_boost")}),(0,s.jsx)(e5,{})]}),(0,s.jsxs)("div",{className:"mb-4 flex items-end gap-3",children:[(0,s.jsx)(eo.ZP,{className:"text-purple"}),(0,s.jsx)(i.E,{height:32,width:100,className:"rounded-6"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(i.E,{height:18,width:200,className:"rounded-6"}),(0,s.jsx)(x.$n,{variant:"primary",size:"40",disabled:!0,children:e("stake.compound_points")})]})]})},e3=()=>{let e=(0,l.c)(),{isConnecting:t,isConnected:a}=(0,f.F)(),{data:n,isLoading:i}=(0,_.E)(),{isSignedIn:d,isLoading:c}=(0,p.i_)(),o=(0,e1.e)(n),{data:u}=(0,eu.C)(),{mutate:m}=function(){let{address:e}=(0,f.F)(),{writeContractAsync:t}=(0,g.x)(),a=(0,N.U)(),{data:s,refetch:n}=(0,eu.C)(),{send:r,reset:i}=(0,k.c)(),d=(0,l.c)();return(0,v.n)({mutationKey:["compound-multiplier-points",e],mutationFn:async()=>{if(!e)throw Error(d("errors.wallet_not_connected"));if(e===eJ.Xd)throw Error(d("errors.invalid_account_address"));r({type:"START_COMPOUND",amount:(0,R.J)((null==s?void 0:s.totalUncompounded)||y._s,y.YR.decimals)});let l=await t({account:e,address:y.Sj.address,abi:y.Sj.abi,functionName:"updateAccount",args:[e]});r({type:"SIGN"});let{status:n}=await (0,w.n)(a,{hash:l,confirmations:y.bI});if("reverted"===n)throw r({type:"REJECT"}),Error(d("errors.transaction_reverted"))},onSuccess:()=>{i(),n()},onError:()=>{r({type:"REJECT"})}})}(),{data:h}=F(),{isDisabled:j,message:b}=(0,r.useMemo)(()=>{var t;let s=null!=(t=null==u?void 0:u.totalUncompounded)?t:y._s,l=s>y._s,n=(0,A.ht)((0,R.J)(s,y.YR.decimals),{decimals:y.YR.decimals});return{isDisabled:!l||!a||!d,message:l?e("stake.ready_to_compound",{points:Number(n)>0?n:parseFloat(n).toFixed(2)}):e("stake.no_points_ready")}},[u,a,d,e]);return i||t||c?(0,s.jsx)(e4,{}):(0,s.jsxs)("div",{className:"rounded-16 border border-neutral-10 bg-white-100 p-4 shadow-2 md:rounded-32 md:p-8",children:[(0,s.jsxs)("div",{className:"mb-2 flex items-start justify-between",children:[(0,s.jsx)("p",{className:"text-13 font-500 text-neutral-60",children:e("stake.weighted_boost")}),(0,s.jsx)(e5,{})]}),(0,s.jsxs)("div",{className:"mb-4 flex items-end gap-3",children:[(0,s.jsx)(eo.ZP,{className:"text-purple"}),(0,s.jsx)("span",{className:"text-27 font-600",children:o.formatted})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-between gap-2 md:flex-row md:items-center md:justify-between",children:[(0,s.jsx)("span",{className:"text-13 font-500 text-neutral-40",children:b}),(0,s.jsx)(x.$n,{disabled:j||!!h,variant:"primary",size:"40",onClick:()=>m(),children:e("stake.compound_points")})]})]})};function e6(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("section",{className:"rounded-8 bg-neutral-2.5 md:p-8",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:gap-8",children:[(0,s.jsx)(eY,{}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(280px,1fr)]",children:[(0,s.jsx)(eZ,{}),(0,s.jsxs)("div",{className:"flex flex-col gap-[18px]",children:[(0,s.jsx)(eQ,{}),(0,s.jsx)(e4,{})]})]})]})})})}function e8(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{className:"rounded-8 bg-neutral-2.5 md:p-8",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:gap-8",children:[(0,s.jsx)(eU,{}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(280px,1fr)]",children:[(0,s.jsx)(eG,{}),(0,s.jsxs)("div",{className:"flex flex-col gap-[18px]",children:[(0,s.jsx)(e0,{}),(0,s.jsx)(e3,{})]})]})]})}),(0,s.jsx)(ez,{})]})}function e9(){let e=(0,l.c)(),{isCorrectChain:t,isConnected:a,isSwitching:r}=(0,eT.r)();return(0,s.jsx)(n.q,{children:(0,s.jsxs)("div",{className:"mx-auto flex size-full flex-col gap-8 p-4 md:p-8",children:[(0,s.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h1",{className:"text-27 font-bold md:text-40",children:e("stake.title")}),(0,s.jsx)("p",{className:"text-13 md:text-19",children:e("stake.description")})]}),a&&(!t||r)?(0,s.jsx)(e6,{}):(0,s.jsx)(e8,{})]})})}},54901:(e,t,a)=>{Promise.resolve().then(a.bind(a,47159))},68259:(e,t,a)=>{"use strict";a.d(t,{r:()=>d});var s=a(92834),l=a(22553),n=a(29279),r=a(83381),i=a(70139);function d(){let{isConnected:e}=(0,l.F)(),t=(0,n.i)(),{switchChain:a,isPending:d}=(0,r.R)(),c=t===i.M.id;return(0,s.useEffect)(()=>{!e||c||d||a({chainId:i.M.id})},[e,c,d,a]),{isCorrectChain:c,isConnected:e,isSwitching:d}}},86149:(e,t,a)=>{"use strict";a.d(t,{I:()=>c});var s=a(27274),l=a(36931),n=a(63207),r=a(51960),i=a(53692),d=a(2065);function c(e){let{content:t,link:a}=e,c=(0,i.c)();return(0,s.jsx)(l.Tooltip,{delayDuration:d.j2.DELAY_DURATION,side:"top",className:"border-0",content:(0,s.jsxs)("div",{className:"flex w-[286px] flex-col gap-4 rounded-8 bg-white-100 p-4",children:[(0,s.jsx)("span",{className:"text-13 text-neutral-100",children:t}),a&&(0,s.jsx)(r.vx,{href:a,variant:"outline",className:"rounded-8 px-2 py-1",size:"32",icon:(0,s.jsx)(n.XM,{className:"size-3 text-neutral-50"}),children:c("common.learn_more")})]}),children:(0,s.jsx)(n.mo,{className:"size-4 text-neutral-40 hover:text-neutral-100"})})}},92468:(e,t,a)=>{"use strict";a.d(t,{j:()=>i});var s=a(27274),l=a(92834),n=a(99602),r=a(53540);function i(e){let{open:t,onOpenChange:a,onClose:i,title:d,description:c,children:o,trigger:u}=e;return(0,l.useEffect)(()=>{if(!1===t){let e=setTimeout(()=>{let e=document.body;e&&e.style.removeProperty("pointer-events")},0);return()=>clearTimeout(e)}},[t]),(0,l.useEffect)(()=>()=>{let e=document.body;e&&e.style.removeProperty("pointer-events")},[]),(0,s.jsxs)(n.bL,{open:t,onOpenChange:e=>{null==a||a(e),e||i()},children:[u&&(0,s.jsx)(n.l9,{asChild:!0,children:u}),(0,s.jsxs)(n.ZL,{children:[(0,s.jsx)(n.hJ,{className:"fixed inset-0 z-40 bg-neutral-80/60 backdrop-blur-sm"}),(0,s.jsx)(n.UC,{className:"fixed inset-x-0 top-0 z-50 flex size-full max-w-[480px] flex-col items-center justify-center p-4 focus:outline-none md:left-1/2 md:top-1/2 md:h-auto md:-translate-x-1/2 md:-translate-y-1/2 md:py-0",children:(0,s.jsxs)("div",{className:"relative mx-auto w-full max-w-[480px] overflow-y-auto rounded-20 bg-white-100 shadow-3 max-md:max-h-full",children:[(0,s.jsx)(n.bm,{asChild:!0,children:(0,s.jsx)("button",{"aria-label":"Close",className:"absolute right-3 top-3 z-50 flex size-8 items-center justify-center rounded-10 border border-neutral-80/10 backdrop-blur-[20px] transition-colors hover:bg-neutral-10 focus:outline-none",children:(0,s.jsx)(r.USm,{className:"text-neutral-100"})})}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,s.jsx)(n.hE,{asChild:!0,children:(0,s.jsx)("div",{className:"flex w-full items-center gap-1.5",children:(0,s.jsx)("span",{className:"shrink-0 grow basis-0 text-19 font-semibold text-neutral-100",children:d})})}),(0,s.jsx)(n.VY,{asChild:!0,children:(0,s.jsx)("div",{className:"flex w-full flex-col justify-center text-15 text-neutral-100",children:(0,s.jsx)("span",{children:c})})})]}),o]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6888,2973,8038,8866,8275,3279,8955,4866,4512,146,1356,4010,8688,9365,7358],()=>t(54901)),_N_E=e.O()}]);